{
  "timestamp": "20251021_233901",
  "job_id": null,
  "iflow_name": "IFlow_aa435624",
  "original_markdown": "# Salesforce to SAP Customer Creation Integration\r\n\r\n## Table of Contents\r\n\r\n- [API Overview](#api-overview)\r\n- [Endpoints](#endpoints)\r\n- [Current Boomi Flow Logic](#current-boomi-flow-logic)\r\n  - [Process Flow Overview](#process-flow-overview)\r\n  - [Step-by-Step Flow Description](#step-by-step-flow-description)\r\n- [Boomi Transformations Explained](#boomi-transformations-explained)\r\n  - [Map SF Account to Boomi for SAP account](#map-sf-account-to-boomi-for-sap-account)\r\n  - [Map SAP account number to SF](#map-sap-account-number-to-sf)\r\n- [SAP Integration Suite Implementation](#sap-integration-suite-implementation)\r\n  - [Component Mapping](#component-mapping)\r\n  - [Integration Flow Visualization](#integration-flow-visualization)\r\n  - [Configuration Details](#configuration-details)\r\n- [Environment Configuration](#environment-configuration)\r\n- [API Reference](#api-reference)\r\n\r\n## API Overview\r\n\r\nThis integration facilitates the creation of customer master data in SAP ERP systems based on Salesforce Account records. The integration follows a bi-directional synchronization pattern where:\r\n\r\n1. **Business Purpose**: Automatically creates SAP customers when new Salesforce accounts are created, ensuring data consistency across sales and financial systems\r\n2. **Integration Pattern**: Data Sender pattern with dynamic properties for account validation\r\n3. **Authentication**: Standard OAuth/Basic authentication for Salesforce and SAP RFC connections\r\n4. **Data Flow**: Salesforce → Transformation → SAP BAPI → Response Update to Salesforce\r\n5. **Error Handling**: Built-in decision logic to handle existing accounts and prevent duplicates\r\n\r\nThe integration uses SAP BAPI (Business Application Programming Interface) `BAPI_CUSTOMER_CREATEFROMDATA1` for customer creation and implements validation logic to check for existing accounts before processing.\r\n\r\n## Endpoints\r\n\r\n### Salesforce Account Query Endpoint\r\n- **HTTP Method**: GET\r\n- **Purpose**: Retrieve Salesforce Account records for processing\r\n- **Connector**: SF Account Opp QUERY by Created Date\r\n- **Object**: Account\r\n- **Authentication**: Salesforce OAuth\r\n- **Response Format**: XML (Salesforce SOAP format)\r\n\r\n**Query Parameters:**\r\n- Date-based filtering for created accounts\r\n- Account status validation\r\n- Field selection for required customer data\r\n\r\n### SAP BAPI Customer Creation Endpoint\r\n- **HTTP Method**: POST\r\n- **Purpose**: Create new customer master records in SAP\r\n- **Connector**: Boomi Create Customer Function\r\n- **Function Module**: BAPI_CUSTOMER_CREATEFROMDATA1\r\n- **Authentication**: SAP RFC Connection\r\n- **Request Format**: JSON (SAP BAPI format)\r\n- **Response Format**: JSON with customer number and status\r\n\r\n**Request Structure:**\r\n```json\r\n{\r\n  \"IMPORT\": {\r\n    \"I_PI_COMPANYDATA\": {\r\n      \"NAME\": \"Company Name\",\r\n      \"STREET\": \"Street Address\",\r\n      \"CITY\": \"City Name\",\r\n      \"REGION\": \"State/Province\",\r\n      \"POSTL_COD1\": \"Postal Code\",\r\n      \"COUNTRY\": \"Country Code\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Response Structure:**\r\n```json\r\n{\r\n  \"EXPORT\": {\r\n    \"E_CUSTOMERNO\": \"1000001\"\r\n  }\r\n}\r\n```\r\n\r\n### Salesforce Account Update Endpoint\r\n- **HTTP Method**: POST\r\n- **Purpose**: Update Salesforce Account with SAP customer number\r\n- **Connector**: SF Account UPDATE Description with SAP Customer Number\r\n- **Object**: Account\r\n- **Operation**: update\r\n- **Authentication**: Salesforce OAuth\r\n- **Request Format**: XML (Salesforce SOAP format)\r\n\r\n## Current Boomi Flow Logic\r\n\r\n### Process Flow Overview\r\n\r\nThis integration process orchestrates the creation of SAP customer records from Salesforce account data through a structured workflow:\r\n\r\n1. **Trigger**: Process initiated by Salesforce account query based on creation date\r\n2. **Dynamic Properties**: Extract and set SF Account ID and Name for tracking\r\n3. **Data Transformation**: Convert Salesforce account data to SAP BAPI format\r\n4. **SAP Integration**: Create customer record using SAP BAPI function\r\n5. **Validation Logic**: Determine if customer creation was successful\r\n6. **Response Processing**: Transform SAP response back to Salesforce format\r\n7. **Account Update**: Update original Salesforce account with SAP customer number\r\n8. **Error Handling**: Handle existing account scenarios with appropriate messaging\r\n\r\n### Step-by-Step Flow Description\r\n\r\n---\r\n\r\n#### **Step 1: Start Event (shape1)**\r\n\r\n**Component Type:** Start Event\r\n\r\n**Purpose:** Initiate the integration process, typically triggered by a scheduled query or real-time event\r\n\r\n**Configuration Details:**\r\n\r\n- **Connector Type:** Generic Start Event\r\n- **Operation:** Process initiation\r\n- **Input Profile:** Salesforce Account Query Response\r\n- **Trigger Conditions:** New or modified Salesforce accounts\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Salesforce account records from query operation\r\n- **Processing:** Process initialization and data validation\r\n- **Output:** Account data ready for property extraction\r\n\r\n---\r\n\r\n#### **Step 2: Document Properties (shape9)**\r\n\r\n**Component Type:** Document Properties - Set SF Account ID and SF Account Name\r\n\r\n**Purpose:** Extract and store Salesforce Account ID and Name as dynamic properties for tracking throughout the process\r\n\r\n**Configuration Details:**\r\n\r\n- **Dynamic Properties:** 2 properties configured\r\n  - **Dynamic Document Property - DDP_SF_Account_ID**: Stores the Salesforce Account ID for reference\r\n  - **Dynamic Document Property - DDP_SF_Account_Name**: Stores the Salesforce Account Name for reference\r\n- **Property Source**: Process property mappings from incoming Salesforce account data\r\n- **Usage**: These properties are used later in the process for response mapping and error handling\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Salesforce account query response XML\r\n- **Processing:** Extract Account ID and Name fields, store as document properties\r\n- **Output:** Enhanced data with dynamic properties available for subsequent steps\r\n\r\n---\r\n\r\n#### **Step 3: Transform Component (shape2)**\r\n\r\n**Component Type:** Map/Transform - SF Account QUERY Response XML → Boomi for SAP BAPI_CUSTOMER_CREATEFROMDATA1 FUNCTION Request JSON\r\n\r\n**Purpose:** Transform Salesforce Account data from XML format to SAP BAPI JSON request format\r\n\r\n**Configuration Details:**\r\n\r\n- **Input Profile:** Salesforce Account Query Response XML structure\r\n- **Output Profile:** SAP BAPI_CUSTOMER_CREATEFROMDATA1 JSON request structure\r\n- **Transformation Logic:** Direct field mapping from Salesforce billing address fields to SAP company data fields\r\n- **Mapping Component**: Map SF Account to Boomi for SAP account\r\n\r\n**Field Mappings:**\r\n\r\n| Source Field | Target Field | Data Type | Business Purpose |\r\n|--------------|--------------|-----------|------------------|\r\n| Name | I_PI_COMPANYDATA.NAME | String | Maps Salesforce account name to SAP customer company name |\r\n| BillingStreet | I_PI_COMPANYDATA.STREET | String | Maps billing address street to SAP customer street address |\r\n| BillingCity | I_PI_COMPANYDATA.CITY | String | Maps billing city to SAP customer city |\r\n| BillingState | I_PI_COMPANYDATA.REGION | String | Maps billing state/province to SAP customer region |\r\n| BillingPostalCode | I_PI_COMPANYDATA.POSTL_COD1 | String | Maps billing postal code to SAP customer postal code |\r\n| BillingCountry | I_PI_COMPANYDATA.COUNTRY | String | Maps billing country to SAP customer country code |\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Salesforce Account XML with billing address information\r\n- **Processing:** Field-by-field mapping and data type conversion to SAP BAPI format\r\n- **Output:** SAP BAPI_CUSTOMER_CREATEFROMDATA1 JSON request ready for SAP connector\r\n\r\n---\r\n\r\n#### **Step 4: Connector Action (shape3)**\r\n\r\n**Component Type:** SAP Function Connector - Boomi Create Customer Function\r\n\r\n**Purpose:** Execute SAP BAPI function to create new customer master record\r\n\r\n**Configuration Details:**\r\n\r\n- **Connector Type:** Generic Connector (configured for SAP RFC)\r\n- **Function Module:** BAPI_CUSTOMER_CREATEFROMDATA1\r\n- **Operation:** Customer creation in SAP ERP\r\n- **Authentication:** SAP RFC connection with appropriate user credentials\r\n- **Error Handling:** Return SAP-specific error messages and status codes\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** SAP BAPI JSON request with customer company data\r\n- **Processing:** Execute BAPI function in SAP system to create customer record\r\n- **Output:** SAP BAPI response with new customer number or error information\r\n\r\n---\r\n\r\n#### **Step 5: Transform Component (shape10)**\r\n\r\n**Component Type:** Map/Transform - Boomi for SAP BAPI_CUSTOMER_CREATEFROMDATA1 FUNCTION Response JSON → SF Account UPDATE Request XML\r\n\r\n**Purpose:** Transform SAP BAPI response to Salesforce Account update format with customer number\r\n\r\n**Configuration Details:**\r\n\r\n- **Input Profile:** SAP BAPI response JSON structure\r\n- **Output Profile:** Salesforce Account update XML structure\r\n- **Transformation Logic:** Extract customer number and format for Salesforce description field\r\n- **Function Steps:** Custom function to append \"SAP customer #:\" prefix to customer number\r\n\r\n**Field Mappings:**\r\n\r\n| Source Field | Target Field | Data Type | Business Purpose |\r\n|--------------|--------------|-----------|------------------|\r\n| E_CUSTOMERNO | Account.Description | String | Maps SAP customer number to Salesforce account description with prefix |\r\n| DDP_SF_Account_ID | Account.Id | String | Uses stored document property for account identification |\r\n| DDP_SF_Account_Name | Account.Name | String | Uses stored document property for account name reference |\r\n\r\n**Transformation Functions:**\r\n\r\n- **Append \"SAP customer #:\" and value from field**: Custom function that prepends descriptive text to customer number\r\n- **Get Document Property**: Retrieves previously stored SF Account ID and Name properties\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** SAP BAPI response JSON with customer number\r\n- **Processing:** Extract customer number, apply formatting function, retrieve document properties\r\n- **Output:** Salesforce Account update XML with formatted customer number description\r\n\r\n---\r\n\r\n#### **Step 6: Decision Point (shape25)**\r\n\r\n**Component Type:** Decision - Is it a new account?\r\n\r\n**Purpose:** Evaluate whether the customer was successfully created in SAP or if it already exists\r\n\r\n**Configuration Details:**\r\n\r\n- **Decision Criteria:** notequals comparison logic\r\n- **Branch Logic:** Routes to either successful update path or existing account handling\r\n- **Routing Rules:** Success path continues to Salesforce update, failure path routes to information message\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** SAP BAPI response data with success/failure indicators\r\n- **Processing:** Evaluate response status to determine if customer was newly created\r\n- **Output:** Route data to appropriate path based on creation status\r\n\r\n---\r\n\r\n#### **Step 7a: Successful Path - Connector Action (shape5)**\r\n\r\n**Component Type:** Salesforce Connector - SF Account UPDATE Description with SAP Customer Number\r\n\r\n**Purpose:** Update the original Salesforce account with the newly created SAP customer number\r\n\r\n**Configuration Details:**\r\n\r\n- **Connector Type:** Salesforce Connector\r\n- **Object:** Account\r\n- **Operation:** update\r\n- **Target Fields:** Description field updated with SAP customer number\r\n- **Authentication:** Salesforce OAuth connection\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Salesforce Account update XML with customer number in description\r\n- **Processing:** Execute Salesforce update operation to store SAP customer reference\r\n- **Output:** Updated Salesforce account record with SAP customer number\r\n\r\n---\r\n\r\n#### **Step 7b: Alternative Path - Information Message (shape21)**\r\n\r\n**Component Type:** Information Message - INFORMATION: Account already exists\r\n\r\n**Purpose:** Handle scenario where SAP customer already exists, providing informational feedback\r\n\r\n**Configuration Details:**\r\n\r\n- **Message Type:** Informational notification\r\n- **Content:** \"Account already exists\" message\r\n- **Routing:** Alternative path when customer creation is not needed\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Data indicating existing customer condition\r\n- **Processing:** Generate informational message about existing account\r\n- **Output:** Process completion with informational status\r\n\r\n---\r\n\r\n#### **Step 8: End Events (shape4, shape22)**\r\n\r\n**Component Type:** End Event\r\n\r\n**Purpose:** Complete the integration process with appropriate success or informational status\r\n\r\n**Configuration Details:**\r\n\r\n- **Completion Type:** Success completion for both paths\r\n- **Final Actions:** Process cleanup and status reporting\r\n- **Continuation Settings:** Process stops after completion\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Either successful Salesforce update or informational message\r\n- **Processing:** Finalize process execution and cleanup resources\r\n- **Output:** Process completion status and final results\r\n\r\n## Boomi Transformations Explained\r\n\r\n### Map SF Account to Boomi for SAP account\r\n\r\n**Purpose:** This transformation converts Salesforce Account data from XML format to the JSON structure required by SAP BAPI_CUSTOMER_CREATEFROMDATA1 function.\r\n\r\n**Input Profile:** Salesforce Account Query Response XML\r\n- Contains standard Salesforce Account fields including billing address information\r\n- XML structure with Account object containing Name and billing address fields\r\n\r\n**Output Profile:** SAP BAPI_CUSTOMER_CREATEFROMDATA1 Request JSON\r\n- JSON structure with IMPORT/I_PI_COMPANYDATA object containing customer company data fields\r\n- Structured for direct consumption by SAP BAPI function\r\n\r\n**Field Mappings:**\r\n\r\n| Source Field | Target Field | Data Type | Business Purpose |\r\n|--------------|--------------|-----------|------------------|\r\n| Name | I_PI_COMPANYDATA.NAME | String | Maps Salesforce account name to SAP customer company name |\r\n| BillingStreet | I_PI_COMPANYDATA.STREET | String | Maps billing address street to SAP customer street address |\r\n| BillingCity | I_PI_COMPANYDATA.CITY | String | Maps billing city to SAP customer city |\r\n| BillingState | I_PI_COMPANYDATA.REGION | String | Maps billing state/province to SAP customer region |\r\n| BillingPostalCode | I_PI_COMPANYDATA.POSTL_COD1 | String | Maps billing postal code to SAP customer postal code |\r\n| BillingCountry | I_PI_COMPANYDATA.COUNTRY | String | Maps billing country to SAP customer country code |\r\n\r\n**Transformation Logic:**\r\n- Direct field mapping from Salesforce billing address fields to corresponding SAP company data fields\r\n- No data type conversion needed as all fields are string types\r\n- Maintains data integrity while restructuring for SAP BAPI consumption\r\n\r\n### Map SAP account number to SF\r\n\r\n**Purpose:** This transformation processes the SAP BAPI response and prepares it for updating the original Salesforce account with the newly created customer number.\r\n\r\n**Input Profile:** SAP BAPI_CUSTOMER_CREATEFROMDATA1 Response JSON\r\n- Contains E_CUSTOMERNO field with the newly created SAP customer number\r\n- JSON structure with EXPORT section containing response data\r\n\r\n**Output Profile:** Salesforce Account Update Request XML\r\n- XML structure for Salesforce Account update operation\r\n- Contains Account object with Id, Name, and Description fields\r\n\r\n**Field Mappings:**\r\n\r\n| Source Field | Target Field | Data Type | Business Purpose |\r\n|--------------|--------------|-----------|------------------|\r\n| E_CUSTOMERNO | Account.Description (via function) | String | Maps SAP customer number to Salesforce account description with formatting |\r\n| DDP_SF_Account_ID (property) | Account.Id | String | References original Salesforce account for update operation |\r\n| DDP_SF_Account_Name (property) | Account.Name | String | Maintains account name consistency during update |\r\n\r\n**Transformation Functions:**\r\n\r\n**Append \"SAP customer #:\" and value from field**\r\n- **Type:** User Defined Function\r\n- **Purpose:** Formats the SAP customer number with descriptive prefix for Salesforce display\r\n- **Input:** Raw SAP customer number (E_CUSTOMERNO)\r\n- **Output:** Formatted string \"SAP customer #:[customer_number]\"\r\n\r\n**Get Document Property**\r\n- **Type:** Process Property Function\r\n- **Purpose:** Retrieves previously stored Salesforce Account ID and Name\r\n- **Properties Retrieved:**\r\n  - Dynamic Document Property - DDP_SF_Account_ID\r\n  - Dynamic Document Property - DDP_SF_Account_Name\r\n\r\n**Transformation Logic:**\r\n- Extract SAP customer number from BAPI response\r\n- Apply custom formatting function to create user-friendly description\r\n- Retrieve stored Salesforce account properties for update targeting\r\n- Structure data for Salesforce update operation\r\n\r\n## SAP Integration Suite Implementation\r\n\r\n### Component Mapping\r\n\r\n#### Main Process Component Mapping\r\n\r\n| Boomi Component | SAP Integration Suite Equivalent | Purpose |\r\n|-----------------|----------------------------------|---------|\r\n| Start Event (shape1) | Start Message Event | Initiates the integration flow when triggered by Salesforce account data |\r\n| Document Properties (shape9) | Content Modifier (Set Properties) | Extracts and stores SF Account ID and Name as exchange properties |\r\n| Map Transform (shape2) | Message Mapping | Transforms Salesforce Account XML to SAP BAPI JSON request format |\r\n| SAP Connector (shape3) | Request Reply with RFC Adapter | Executes SAP BAPI_CUSTOMER_CREATEFROMDATA1 function |\r\n| Map Transform (shape10) | Message Mapping | Transforms SAP BAPI response to Salesforce Account update XML |\r\n| Decision (shape25) | Router (Exclusive Gateway) | Routes based on customer creation success/failure |\r\n| Salesforce Connector (shape5) | Request Reply with Salesforce Adapter | Updates Salesforce account with SAP customer number |\r\n| Information Message (shape21) | Content Modifier | Provides informational message for existing accounts |\r\n| End Events (shape4, shape22) | End Message Events | Completes the integration flow with appropriate status |\r\n\r\n### Integration Flow Visualization\r\n\r\n```mermaid\r\nflowchart TD\r\n    %% Define node styles for SAP Integration Suite components\r\n    classDef salesforceAdapter fill:#87CEEB,stroke:#333,stroke-width:2px\r\n    classDef contentModifier fill:#98FB98,stroke:#333,stroke-width:2px\r\n    classDef mapping fill:#DDA0DD,stroke:#333,stroke-width:2px\r\n    classDef sapAdapter fill:#FFD700,stroke:#333,stroke-width:2px\r\n    classDef event fill:#C0C0C0,stroke:#333,stroke-width:2px\r\n    classDef router fill:#FFA07A,stroke:#333,stroke-width:2px\r\n\r\n    %% Main Integration Flow\r\n    Start((\"Start Message Event\")):::event --> SFQuery[\"Salesforce Adapter: Query Accounts\"]:::salesforceAdapter\r\n    SFQuery --> SetProperties[\"Content Modifier: Set SF Account Properties\"]:::contentModifier\r\n    SetProperties --> MapToSAP[\"Message Mapping: SF Account to SAP BAPI\"]:::mapping\r\n    MapToSAP --> SAPCreate[\"RFC Adapter: Create Customer BAPI\"]:::sapAdapter\r\n    SAPCreate --> MapToSF[\"Message Mapping: SAP Response to SF Update\"]:::mapping\r\n    MapToSF --> DecisionRouter{\"Router: Is New Account?\"}:::router\r\n    \r\n    %% Success Path\r\n    DecisionRouter -->|\"New Customer Created\"| SFUpdate[\"Salesforce Adapter: Update Account\"]:::salesforceAdapter\r\n    SFUpdate --> SuccessEnd((\"End - Success\")):::event\r\n    \r\n    %% Existing Account Path\r\n    DecisionRouter -->|\"Account Already Exists\"| InfoMessage[\"Content Modifier: Account Exists Info\"]:::contentModifier\r\n    InfoMessage --> InfoEnd((\"End - Information\")):::event\r\n\r\n    %% Property Details Subgraph\r\n    subgraph PropertyDetails[\"Dynamic Properties Detail\"]\r\n        ExtractID[\"Extract: SF Account ID\"]:::contentModifier\r\n        ExtractName[\"Extract: SF Account Name\"]:::contentModifier\r\n    end\r\n    \r\n    SetProperties -.-> PropertyDetails\r\n\r\n    %% Field Mapping Details Subgraph\r\n    subgraph MappingDetails[\"Field Mapping Details\"]\r\n        MapName[\"Name → COMPANYDATA.NAME\"]:::mapping\r\n        MapStreet[\"BillingStreet → COMPANYDATA.STREET\"]:::mapping\r\n        MapCity[\"BillingCity → COMPANYDATA.CITY\"]:::mapping\r\n        MapState[\"BillingState → COMPANYDATA.REGION\"]:::mapping\r\n        MapPostal[\"BillingPostalCode → COMPANYDATA.POSTL_COD1\"]:::mapping\r\n        MapCountry[\"BillingCountry → COMPANYDATA.COUNTRY\"]:::mapping\r\n    end\r\n    \r\n    MapToSAP -.-> MappingDetails\r\n\r\n    %% Apply styles\r\n    class SFQuery,SFUpdate salesforceAdapter\r\n    class SetProperties,ExtractID,ExtractName,InfoMessage contentModifier\r\n    class MapToSAP,MapToSF,MapName,MapStreet,MapCity,MapState,MapPostal,MapCountry mapping\r\n    class SAPCreate sapAdapter\r\n    class Start,SuccessEnd,InfoEnd event\r\n    class DecisionRouter router\r\n```\r\n\r\n### Configuration Details\r\n\r\n#### Salesforce Adapter Configuration\r\n- **Connection**: Salesforce OAuth connection with appropriate API version\r\n- **Query Operation**: SOQL query for Account records with date-based filtering\r\n- **Update Operation**: Account object update with Description field modification\r\n- **Security**: OAuth 2.0 with refresh token handling\r\n\r\n#### RFC Adapter Configuration\r\n- **Connection**: SAP RFC connection with host, system number, and client details\r\n- **Function Module**: BAPI_CUSTOMER_CREATEFROMDATA1\r\n- **Authentication**: SAP user credentials with appropriate authorization\r\n- **Message Protocol**: RFC (Remote Function Call)\r\n\r\n#### Message Mapping Components\r\n- **SF Account to SAP BAPI Mapping**:\r\n  - Source: Salesforce Account XML structure\r\n  - Target: SAP BAPI JSON request structure\r\n  - Direct field mappings for billing address data\r\n\r\n- **SAP Response to SF Update Mapping**:\r\n  - Source: SAP BAPI response JSON\r\n  - Target: Salesforce Account update XML\r\n  - Custom functions for customer number formatting\r\n\r\n#### Content Modifier (Dynamic Properties)\r\n- **Property 1**: DDP_SF_Account_ID - XPath extraction from Salesforce Account\r\n- **Property 2**: DDP_SF_Account_Name - XPath extraction from Salesforce Account\r\n- **Usage**: Referenced in response mapping for account identification\r\n\r\n#### Router Configuration\r\n- **Condition**: Evaluate SAP BAPI response for successful customer creation\r\n- **Default Route**: Information message for existing accounts\r\n- **Conditional Route**: Salesforce update for new customers\r\n\r\n## Environment Configuration\r\n\r\n### Connection Parameters\r\n- **Salesforce Connection**:\r\n  - Environment: Production/Sandbox URL\r\n  - API Version: Latest supported version (v58.0 recommended)\r\n  - OAuth Client ID/Secret: Environment-specific credentials\r\n  - Security Token: Required for API access\r\n\r\n- **SAP RFC Connection**:\r\n  - Application Server: SAP ERP system hostname/IP\r\n  - System Number: SAP system number (00, 01, etc.)\r\n  - Client: SAP client number (100, 200, etc.)\r\n  - Language: EN (English) or organization default\r\n  - User Credentials: SAP service account with BAPI execution rights\r\n\r\n### Security Configuration\r\n- **Authentication Methods**:\r\n  - Salesforce: OAuth 2.0 with client credentials flow\r\n  - SAP: Basic authentication with encrypted password storage\r\n- **SSL/TLS**: Required for all external connections\r\n- **Certificate Management**: Environment-specific certificates for secure communication\r\n\r\n### Runtime Configuration\r\n- **Memory Requirements**: 2GB minimum for data processing\r\n- **CPU Requirements**: Multi-core processing recommended\r\n- **Network Requirements**: Stable connectivity to Salesforce and SAP systems\r\n- **Timeout Settings**: 60 seconds for SAP BAPI calls, 30 seconds for Salesforce operations\r\n\r\n### Error Handling Configuration\r\n- **Retry Logic**: 3 attempts for transient failures\r\n- **Error Logging**: Comprehensive logging for troubleshooting\r\n- **Alert Notifications**: Email notifications for critical failures\r\n- **Exception Handling**: Graceful handling of duplicate customer scenarios\r\n\r\n## API Reference\r\n\r\n### Salesforce Account Query API\r\n\r\n**Endpoint**: `/services/data/v58.0/query`\r\n**Method**: GET\r\n**Authentication**: OAuth 2.0 Bearer Token\r\n\r\n#### Query Parameters\r\n| Parameter | Type | Required | Description | Example Value |\r\n|-----------|------|----------|-------------|---------------|\r\n| `q` | String | Yes | SOQL query string | `SELECT Id, Name, BillingStreet, BillingCity, BillingState, BillingPostalCode, BillingCountry FROM Account WHERE CreatedDate >= TODAY` |\r\n\r\n#### Response Format\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<QueryResponse>\r\n    <result>\r\n        <done>true</done>\r\n        <records>\r\n            <Id>0011234567890ABC</Id>\r\n            <Name>Acme Corporation</Name>\r\n            <BillingStreet>123 Main Street</BillingStreet>\r\n            <BillingCity>New York</BillingCity>\r\n            <BillingState>NY</BillingState>\r\n            <BillingPostalCode>10001</BillingPostalCode>\r\n            <BillingCountry>USA</BillingCountry>\r\n        </records>\r\n    </result>\r\n</QueryResponse>\r\n```\r\n\r\n### SAP BAPI Customer Creation API\r\n\r\n**Function Module**: BAPI_CUSTOMER_CREATEFROMDATA1\r\n**Protocol**: RFC\r\n**Authentication**: SAP User Credentials\r\n\r\n#### Request Structure\r\n```json\r\n{\r\n  \"IMPORT\": {\r\n    \"I_PI_COMPANYDATA\": {\r\n      \"NAME\": \"Acme Corporation\",\r\n      \"STREET\": \"123 Main Street\",\r\n      \"CITY\": \"New York\",\r\n      \"REGION\": \"NY\",\r\n      \"POSTL_COD1\": \"10001\",\r\n      \"COUNTRY\": \"US\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n#### Response Structure\r\n```json\r\n{\r\n  \"EXPORT\": {\r\n    \"E_CUSTOMERNO\": \"1000001\"\r\n  },\r\n  \"RETURN\": {\r\n    \"TYPE\": \"S\",\r\n    \"MESSAGE\": \"Customer 1000001 was created\"\r\n  }\r\n}\r\n```\r\n\r\n### Salesforce Account Update API\r\n\r\n**Endpoint**: `/services/data/v58.0/sobjects/Account/{Id}`\r\n**Method**: PATCH\r\n**Authentication**: OAuth 2.0 Bearer Token\r\n\r\n#### Request Body\r\n```json\r\n{\r\n  \"Description\": \"SAP customer #:1000001\"\r\n}\r\n```\r\n\r\n#### Response Format\r\n```json\r\n{\r\n  \"id\": \"0011234567890ABC\",\r\n  \"success\": true,\r\n  \"errors\": []\r\n}\r\n```\r\n\r\n### Error Codes\r\n\r\n#### Salesforce Error Codes\r\n| Code | Description | Resolution |\r\n|------|-------------|------------|\r\n| INVALID_LOGIN | Authentication failure | Verify OAuth credentials and refresh token |\r\n| QUERY_TIMEOUT | Query execution timeout | Reduce query scope or add pagination |\r\n| FIELD_CUSTOM_VALIDATION_EXCEPTION | Field validation error | Check required fields and data formats |\r\n\r\n#### SAP RFC Error Codes\r\n| Code | Description | Resolution |\r\n|------|-------------|------------|\r\n| RFC_COMMUNICATION_FAILURE | Connection error | Verify SAP system availability and network connectivity |\r\n| RFC_LOGON_FAILURE | Authentication error | Check SAP user credentials and authorization |\r\n| BAPI_CUSTOMER_EXISTS | Customer already exists | Handle as business exception, skip creation |\r\n\r\n### Rate Limiting\r\n- **Salesforce**: API request limits based on organization edition and user licenses\r\n- **SAP**: No standard rate limits, but consider system performance impact\r\n- **Recommended**: Implement batch processing for large volumes (>100 accounts)",
  "markdown_length": 26816,
  "constructed_query": "Create a complete SAP iFlow integration package named 'IFlow_aa435624' with the following requirements from the documentation:\n\n# Salesforce to SAP Customer Creation Integration\r\n\r\n## Table of Contents\r\n\r\n- [API Overview](#api-overview)\r\n- [Endpoints](#endpoints)\r\n- [Current Boomi Flow Logic](#current-boomi-flow-logic)\r\n  - [Process Flow Overview](#process-flow-overview)\r\n  - [Step-by-Step Flow Description](#step-by-step-flow-description)\r\n- [Boomi Transformations Explained](#boomi-transformations-explained)\r\n  - [Map SF Account to Boomi for SAP account](#map-sf-account-to-boomi-for-sap-account)\r\n  - [Map SAP account number to SF](#map-sap-account-number-to-sf)\r\n- [SAP Integration Suite Implementation](#sap-integration-suite-implementation)\r\n  - [Component Mapping](#component-mapping)\r\n  - [Integration Flow Visualization](#integration-flow-visualization)\r\n  - [Configuration Details](#configuration-details)\r\n- [Environment Configuration](#environment-configuration)\r\n- [API Reference](#api-reference)\r\n\r\n## API Overview\r\n\r\nThis integration facilitates the creation of customer master data in SAP ERP systems based on Salesforce Account records. The integration follows a bi-directional synchronization pattern where:\r\n\r\n1. **Business Purpose**: Automatically creates SAP customers when new Salesforce accounts are created, ensuring data consistency across sales and financial systems\r\n2. **Integration Pattern**: Data Sender pattern with dynamic properties for account validation\r\n3. **Authentication**: Standard OAuth/Basic authentication for Salesforce and SAP RFC connections\r\n4. **Data Flow**: Salesforce → Transformation → SAP BAPI → Response Update to Salesforce\r\n5. **Error Handling**: Built-in decision logic to handle existing accounts and prevent duplicates\r\n\r\nThe integration uses SAP BAPI (Business Application Programming Interface) `BAPI_CUSTOMER_CREATEFROMDATA1` for customer creation and implements validation logic to check for existing accounts before processing.\r\n\r\n## Endpoints\r\n\r\n### Salesforce Account Query Endpoint\r\n- **HTTP Method**: GET\r\n- **Purpose**: Retrieve Salesforce Account records \n\nGenerate a production-ready iFlow with proper:\n1. Start and End events\n2. Required adapters and connectors\n3. Content modifiers and processing steps\n4. Proper sequence flows\n5. Error handling\n6. SAP Integration Suite compliance\n",
  "query_length": 2358,
  "markdown_truncated_at": 2000,
  "api_endpoint": "/api/generate-iflow-from-markdown",
  "request_time": "2025-10-21T23:39:01.579783"
}