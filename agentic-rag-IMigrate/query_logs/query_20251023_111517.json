{
  "timestamp": "20251023_111517",
  "job_id": null,
  "iflow_name": "IFlow_b6161171",
  "original_markdown": "# SuccessFactors Employee Data Synchronization to NAVEX SFTP with Error Handling\r\n\r\n## Table of Contents\r\n\r\n1. [API Overview](#api-overview)\r\n2. [Endpoints](#endpoints)\r\n3. [Current Boomi Flow Logic](#current-boomi-flow-logic)\r\n   - [Process Flow Overview](#process-flow-overview)\r\n   - [Step-by-Step Flow Description](#step-by-step-flow-description)\r\n4. [Boomi Transformations Explained](#boomi-transformations-explained)\r\n5. [SAP Integration Suite Implementation](#sap-integration-suite-implementation)\r\n   - [Component Mapping](#component-mapping)\r\n   - [Integration Flow Visualization](#integration-flow-visualization)\r\n   - [Configuration Details](#configuration-details)\r\n6. [Environment Configuration](#environment-configuration)\r\n7. [API Reference](#api-reference)\r\n\r\n## API Overview\r\n\r\nThis integration solution provides comprehensive employee data synchronization between SAP SuccessFactors and NAVEX via SFTP delivery. The solution focuses on accurate and timely transfer of employee data with robust error handling, data transformation, and secure file delivery capabilities.\r\n\r\n**Base Endpoints:**\r\n- SAP SuccessFactors OData API for employee data extraction\r\n- NAVEX SFTP server for secure file delivery\r\n- PepsiCo SFTP server for internal archiving\r\n\r\n**Authentication:**\r\n- OAuth 2.0 for SuccessFactors API access\r\n- SSH key-based authentication for SFTP connections\r\n- PGP encryption for secure file transfers\r\n\r\n**Key Capabilities:**\r\n- Dynamic filter construction for flexible data extraction\r\n- Real-time picklist value lookups for data enrichment\r\n- Comprehensive field mapping and transformation\r\n- Multi-destination file delivery with encryption\r\n- Complete error tracking and notification system\r\n\r\n## Endpoints\r\n\r\n### SuccessFactors Employee Data Extraction\r\n- **Method:** GET\r\n- **Endpoint Pattern:** `/odata/v2/CompoundEmployee`\r\n- **Purpose:** Extract employee demographic and employment information\r\n- **Authentication:** OAuth 2.0 Bearer Token\r\n\r\n**Query Parameters:**\r\n\r\n#### **Standard OData Parameters**\r\n| Parameter | Type | Required | Default | Description | Example Value |\r\n|-----------|------|----------|---------|-------------|---------------|\r\n| `$filter` | String | No | None | Dynamic WHERE clause with multiple criteria | See filtering examples below |\r\n| `$select` | String | No | All fields | Employee demographic field selection | `person_id_external,first_name,last_name,email` |\r\n| `$expand` | String | No | None | Related entity expansion | `PersonalInformation,Employment` |\r\n| `$top` | Integer | No | 1000 | Maximum number of records to return | `500` |\r\n| `$skip` | Integer | No | 0 | Number of records to skip for pagination | `1000` |\r\n| `$orderby` | String | No | None | Sort order for results | `last_modified_on desc` |\r\n| `$format` | String | No | JSON | Response format specification | `json` |\r\n\r\n#### **Advanced Filtering Examples**\r\n\r\n**Entity-Based Filtering:**\r\n| Filter Type | Filter Expression | Business Purpose | Example Values |\r\n|-------------|-------------------|------------------|----------------|\r\n| **Legal Entity** | `legal_entity_code in ('entity1','entity2')` | Filter by organizational structure | `'PEP01','PEP02','PEP03'` |\r\n| **Employee Class** | `employee_class in ('class1','class2')` | Filter by employee role/level | `'REG','CON','TEMP'` |\r\n| **Territory** | `company_territory_code in ('territory1','territory2')` | Filter by geographic region | `'US','CA','MX'` |\r\n| **Employment Status** | `employment_status eq 'A'` | Filter active employees only | `'A' (Active), 'T' (Terminated)` |\r\n\r\n**Date-Based Filtering:**\r\n| Filter Type | Filter Expression | Business Purpose | Example Values |\r\n|-------------|-------------------|------------------|----------------|\r\n| **Last Modified** | `last_modified_on gt datetime'2024-01-01T00:00:00'` | Delta processing since last run | `2024-01-01T00:00:00` |\r\n| **End Date Range** | `end_date ge datetime'2024-01-01' and end_date le datetime'2024-12-31'` | Fiscal year filtering | `2024-01-01 to 2024-12-31` |\r\n| **Hire Date** | `hire_date ge datetime'2020-01-01'` | New employee filtering | `2020-01-01` |\r\n\r\n## Current Boomi Flow Logic\r\n\r\n### Process Flow Overview\r\n\r\nThis Boomi integration process implements a comprehensive employee data synchronization workflow that connects SAP SuccessFactors to NAVEX via secure SFTP delivery. The process is designed to handle large employee datasets with robust error handling, data transformation, and multi-destination file delivery capabilities.\r\n\r\n**Process Triggers:**\r\n1. **Scheduled Execution**: Timer-based triggers for regular synchronization\r\n2. **On-Demand Processing**: Manual process initiation for ad-hoc data extracts\r\n3. **Delta Processing**: Incremental updates based on last modified dates\r\n\r\n**Main Processing Phases:**\r\n1. **Initialization**: Error tracking setup and configuration validation\r\n2. **Data Extraction**: Dynamic query construction and SuccessFactors data retrieval\r\n3. **Data Transformation**: Field mapping, enrichment, and format standardization\r\n4. **File Generation**: CSV creation and PGP encryption\r\n5. **Multi-Destination Delivery**: NAVEX and PepsiCo SFTP distribution\r\n6. **Notification**: Email alerts and execution reporting\r\n\r\n**Expected Outcomes:**\r\n- Encrypted CSV files delivered to NAVEX SFTP server\r\n- Archived copies stored in PepsiCo SFTP repository\r\n- Comprehensive error tracking and reporting\r\n- Email notifications with execution status and metrics\r\n\r\n### Step-by-Step Flow Description\r\n\r\n## **Process Flow Overview**\r\n\r\n### **Flow Steps**\r\n\r\n---\r\n\r\n#### **Step 1: Process Initialization**\r\n\r\n**Component Type:** Start Event\r\n\r\n**Purpose:** Initialize the employee data synchronization process with comprehensive error tracking and configuration validation\r\n\r\n**Configuration Details:**\r\n\r\n- **Trigger Type:** Scheduled or manual execution\r\n- **Error Reporting Setup:** Initialize comprehensive error tracking across all component types\r\n- **Property Validation:** Verify all required process properties are configured\r\n- **Connection Testing:** Validate connectivity to SuccessFactors and SFTP endpoints\r\n\r\n**Error Property Categories:**\r\n\r\n| Category | Property Names | Description |\r\n|----------|----------------|-------------|\r\n| Business Rule Errors | RPT_INT_ALL_BRULE_ERR_CNT, RPT_INT_ALL_BRULE_WRN_CNT, RPT_INT_ALL_BRULE_SKP_CNT | Error tracking for business rule violations |\r\n| Cleanse Errors | RPT_INT_ALL_CLNS_ERR_CNT, RPT_INT_ALL_CLNS_WRN_CNT, RPT_INT_ALL_CLNS_SKP_CNT | Data cleansing error tracking |\r\n| Decision Errors | RPT_INT_ALL_DCN_ERR_CNT, RPT_INT_ALL_DCN_WRN_CNT, RPT_INT_ALL_DCN_SKP_CNT | Decision point error tracking |\r\n| Route Errors | RPT_INT_ALL_ROUTE_ERR_CNT, RPT_INT_ALL_ROUTE_WRN_CNT, RPT_INT_ALL_ROUTE_SKP_CNT | Routing error tracking |\r\n| TryCatch Errors | RPT_INT_ALL_TRYCATCH_ERR_CNT, RPT_INT_ALL_TRYCATCH_WRN_CNT, RPT_INT_ALL_TRYCATCH_SKP_CNT | Exception handling tracking |\r\n| Return Errors | RPT_INT_ALL_RETURN_ERR_CNT, RPT_INT_ALL_RETURN_WRN_CNT, RPT_INT_ALL_RETURN_SKP_CNT | Return value tracking |\r\n| General Errors | RPT_INT_ALL_ERR_CNT, RPT_INT_INTERFACE_START_TIME, RPT_INT_ALL_WRN_CNT | Overall error tracking |\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Process trigger signal\r\n- **Processing:** Initialize error tracking properties and validate configurations\r\n- **Output:** Initialized process ready for data extraction\r\n\r\n---\r\n\r\n#### **Step 2: Filter Construction**\r\n\r\n**Component Type:** Document Properties\r\n\r\n**Purpose:** Build dynamic WHERE clauses and prepare query parameters for SuccessFactors data extraction\r\n\r\n**Configuration Details:**\r\n\r\n- **Dynamic Filter Building:** Construct complex OData filter expressions based on process parameters\r\n- **Date Calculations:** Calculate date ranges for delta processing and fiscal year filtering\r\n- **Parameter Mapping:** Map process configuration to SuccessFactors query parameters\r\n- **Connection String Assembly:** Build complete API endpoint URLs with query parameters\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Process configuration and parameters\r\n- **Processing:** Dynamic query construction with date calculations and filter building\r\n- **Output:** Complete SuccessFactors API query with constructed WHERE clauses\r\n\r\n---\r\n\r\n#### **Step 3: Reference Data Loading**\r\n\r\n**Component Type:** Connector Action (HTTP/OData)\r\n\r\n**Purpose:** Retrieve picklist values and reference data for employee data enrichment\r\n\r\n**Configuration Details:**\r\n\r\n- **Connector Type:** HTTP/OData Connector\r\n- **Operation:** GET operations to SuccessFactors reference data endpoints\r\n- **Target Objects:** Employment status, employee class, location, and territory picklists\r\n- **Caching Strategy:** Load reference data for lookup transformations\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Reference data request parameters\r\n- **Processing:** Retrieve picklist values from SuccessFactors\r\n- **Output:** Cached reference data for employee record enrichment\r\n\r\n---\r\n\r\n#### **Step 4: Employee Data Extraction**\r\n\r\n**Component Type:** Connector Action (SuccessFactors)\r\n\r\n**Purpose:** Execute SuccessFactors queries with constructed filters to retrieve employee data\r\n\r\n**Configuration Details:**\r\n\r\n- **Connector Type:** SuccessFactors OData Connector\r\n- **Operation:** GET CompoundEmployee with dynamic filtering\r\n- **Query Parameters:** Dynamically constructed $filter, $select, $expand parameters\r\n- **Error Handling:** Comprehensive error capture for API failures\r\n\r\n**Input Profile:**\r\n\r\n| Field Path | Description | Data Type | Business Purpose |\r\n|------------|-------------|-----------|------------------|\r\n| CompoundEmployee/person/person_id_external | Global Person ID | String | Unique employee identifier |\r\n| CompoundEmployee/person/employment_information/email_address | Corporate email address | String | Employee contact information |\r\n| CompoundEmployee/person/employment_information/employment_status | Employment status code | String | Current employment status |\r\n| CompoundEmployee/person/employment_information/employee_class | Employee classification | String | Employee role classification |\r\n| CompoundEmployee/person/employment_information/pay_grade | Pay grade level | String | Compensation hierarchy |\r\n| CompoundEmployee/person/employment_information/position | Position title | String | Job role description |\r\n| CompoundEmployee/person/employment_information/location | Location code | String | Work location identifier |\r\n| CompoundEmployee/person/employment_information/territory | Territory code | String | Geographic territory |\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Constructed SuccessFactors query with filters\r\n- **Processing:** Execute OData API call to retrieve employee records\r\n- **Output:** Raw employee data from SuccessFactors in JSON/XML format\r\n\r\n---\r\n\r\n#### **Step 5: Data Transformation and Mapping**\r\n\r\n**Component Type:** Map/Transform\r\n\r\n**Purpose:** Apply comprehensive field mapping and data enrichment to convert SuccessFactors data to NAVEX format\r\n\r\n**Configuration Details:**\r\n\r\n- **Input Profile:** SuccessFactors CompoundEmployee structure\r\n- **Output Profile:** NAVEX CSV record format\r\n- **Transformation Logic:** Field mapping, picklist lookups, and data enrichment\r\n- **Function Steps:** DocumentPropertyGet, string functions, date conversions\r\n\r\n**Output Profile:**\r\n\r\n| Target Field | Description | Source Mapping | Business Purpose |\r\n|--------------|-------------|----------------|------------------|\r\n| Record/Elements/GPID | Global Person ID | CompoundEmployee/person/person_id_external | Employee identification |\r\n| Record/Elements/First Name | Employee first name | CompoundEmployee/person/personal_information/first_name | Employee identification |\r\n| Record/Elements/Last Name | Employee last name | CompoundEmployee/person/personal_information/last_name | Employee identification |\r\n| Record/Elements/Email Address | Corporate email address | CompoundEmployee/person/employment_information/email_address | Employee contact information |\r\n| Record/Elements/emplStatus | Employment status description | CompoundEmployee/person/employment_information/employment_status | Employment status tracking |\r\n| Record/Elements/employee-class | Employee class description | CompoundEmployee/person/employment_information/employee_class | Employee role tracking |\r\n| Record/Elements/Country | Country name | CompoundEmployee/person/employment_information/location/country | Geographic information |\r\n| Record/Elements/Location | Location name | CompoundEmployee/person/employment_information/location/name | Work location information |\r\n| Record/Elements/Manager name | Manager full name | CompoundEmployee/person/employment_information/manager/name | Organizational hierarchy |\r\n| Record/Elements/Termination Date | Employment end date | CompoundEmployee/person/employment_information/termination_date | Employment history |\r\n| Record/Elements/Original Hire Date | First hire date | CompoundEmployee/person/employment_information/hire_date | Employment tenure |\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Raw SuccessFactors employee data\r\n- **Processing:** Field mapping, picklist lookups, data enrichment, and format conversion\r\n- **Output:** NAVEX-formatted employee records ready for CSV generation\r\n\r\n---\r\n\r\n#### **Step 6: CSV File Generation**\r\n\r\n**Component Type:** Connector Action (File)\r\n\r\n**Purpose:** Generate formatted CSV files with proper field separation and data validation\r\n\r\n**Configuration Details:**\r\n\r\n- **File Format:** CSV with configurable field separators\r\n- **Header Generation:** Include field headers for NAVEX processing\r\n- **Data Validation:** Ensure required fields are populated\r\n- **Character Encoding:** UTF-8 encoding for international character support\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** NAVEX-formatted employee records\r\n- **Processing:** CSV file generation with headers and proper formatting\r\n- **Output:** Structured CSV file ready for encryption\r\n\r\n---\r\n\r\n#### **Step 7: PGP Encryption**\r\n\r\n**Component Type:** Document Properties with Encryption\r\n\r\n**Purpose:** Secure files using configured PGP encryption keys for external delivery\r\n\r\n**Configuration Details:**\r\n\r\n- **Encryption Method:** PGP encryption using NAVEX public key\r\n- **Key Management:** Secure key storage and rotation\r\n- **File Integrity:** Ensure encrypted file completeness\r\n- **Compression:** Optional file compression before encryption\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Plain text CSV file\r\n- **Processing:** PGP encryption with NAVEX public key\r\n- **Output:** Encrypted file ready for SFTP delivery\r\n\r\n---\r\n\r\n#### **Step 8: NAVEX SFTP Delivery**\r\n\r\n**Component Type:** Connector Action (SFTP)\r\n\r\n**Purpose:** Deliver encrypted files to NAVEX SFTP server with error handling\r\n\r\n**Configuration Details:**\r\n\r\n- **Connector Type:** SFTP Connector\r\n- **Operation:** PUT operation to NAVEX SFTP server\r\n- **Authentication:** SSH key-based authentication\r\n- **Directory Structure:** Organized file placement based on date/time\r\n- **Error Handling:** Retry logic for delivery failures\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Encrypted CSV file\r\n- **Processing:** SFTP upload to NAVEX server\r\n- **Output:** Confirmation of successful file delivery\r\n\r\n---\r\n\r\n#### **Step 9: Internal Archiving**\r\n\r\n**Component Type:** Connector Action (SFTP)\r\n\r\n**Purpose:** Store processed files in PepsiCo SFTP repository for internal archiving\r\n\r\n**Configuration Details:**\r\n\r\n- **Connector Type:** SFTP Connector\r\n- **Operation:** PUT operation to PepsiCo SFTP server\r\n- **Archive Structure:** Organized by date and process execution\r\n- **Retention Policy:** Configurable file retention periods\r\n- **Backup Strategy:** Redundant storage for critical data\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Processed and encrypted files\r\n- **Processing:** SFTP upload to internal archive\r\n- **Output:** Archived files for compliance and troubleshooting\r\n\r\n---\r\n\r\n#### **Step 10: Email Notification**\r\n\r\n**Component Type:** Connector Action (Email)\r\n\r\n**Purpose:** Send comprehensive email notifications with execution results and metrics\r\n\r\n**Configuration Details:**\r\n\r\n- **Email Templates:** Configurable success and error notification templates\r\n- **Metrics Inclusion:** Process execution time, record counts, and error statistics\r\n- **Recipient Management:** Configurable distribution lists for different notification types\r\n- **Attachment Handling:** Include execution logs and error reports\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Process execution results and metrics\r\n- **Processing:** Email composition with execution statistics\r\n- **Output:** Email notifications to configured recipients\r\n\r\n---\r\n\r\n#### **Step 11: Process Completion**\r\n\r\n**Component Type:** End Event\r\n\r\n**Purpose:** Complete the integration process with final status reporting and cleanup\r\n\r\n**Configuration Details:**\r\n\r\n- **Completion Status:** Success, failure, or partial completion reporting\r\n- **Final Metrics:** Comprehensive execution statistics and timing information\r\n- **Cleanup Operations:** Temporary file removal and resource cleanup\r\n- **Audit Logging:** Complete process audit trail for compliance\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Final process execution status\r\n- **Processing:** Status reporting and cleanup operations\r\n- **Output:** Process completion confirmation with comprehensive metrics\r\n\r\n---\r\n\r\n## Boomi Transformations Explained\r\n\r\n### Canonical To Kafka Avro Transformation\r\n\r\n**Purpose:** Convert SuccessFactors employee data to NAVEX-compatible format with comprehensive field mapping and data enrichment.\r\n\r\n**Input Profile:** SuccessFactors CompoundEmployee structure containing employee demographic and employment information.\r\n\r\n**Output Profile:** NAVEX CSV record format with standardized fields for external processing.\r\n\r\n**Field Mappings:**\r\n\r\n| Source Field | Target Field | Data Type | Business Purpose |\r\n|--------------|--------------|-----------|------------------|\r\n| username | username | String | Maps user identification from profile element |\r\n| locationId | contactID | String | Maps location identifier to contact ID for NAVEX processing |\r\n| pay-group | type | String | Maps pay group classification to record type |\r\n| paycompvalue | name | String | Maps compensation value to name field |\r\n\r\n**Profile Element Mappings:**\r\n\r\n| Profile Element ID | Target Field Path | Business Purpose |\r\n|--------------------|-------------------|------------------|\r\n| 9 | Root/Object/batchProcessingDirectives/Object/accountID/Object/username | Account identification for batch processing |\r\n| 91 | Root/Object/batchContactList/Array/ArrayElement1/Object/contact/Array/ArrayElement1/Object/contactID | Contact identification in batch list |\r\n| 111 | Root/Object/batchContactList/Array/ArrayElement1/Object/contact/Array/ArrayElement1/Object/contactPointList/Array/ArrayElement1/Object/contactPoint/Array/ArrayElement1/Object/type | Contact point type classification |\r\n| 118 | Root/Object/batchProcessingDirectives/Object/batchProcessingOption/Array/ArrayElement1/Object/name | Batch processing option name |\r\n\r\n**Transformation Logic:**\r\n- Direct field mappings with data type preservation\r\n- Profile element references for dynamic configuration\r\n- Array element handling for complex nested structures\r\n- Batch processing directive configuration\r\n\r\n## SAP Integration Suite Implementation\r\n\r\n### Component Mapping\r\n\r\n#### Main Process Component Mapping\r\n| Boomi Component | SAP Integration Suite Equivalent | Purpose |\r\n|-----------------|----------------------------------|---------|\r\n| Start Event | Start Message Event | Initialize employee data synchronization process |\r\n| Document Properties | Content Modifier (Set Properties) | Build dynamic filters and calculate query parameters |\r\n| SuccessFactors Connector | SuccessFactors Adapter | Extract employee data with OData queries |\r\n| Map/Transform | Message Mapping | Convert SuccessFactors data to NAVEX format |\r\n| SFTP Connector (NAVEX) | SFTP Adapter (Receiver) | Deliver encrypted files to NAVEX server |\r\n| SFTP Connector (Archive) | SFTP Adapter (Receiver) | Archive processed files internally |\r\n| Email Connector | Mail Adapter | Send execution notifications |\r\n| End Event | End Message Event | Complete process with status reporting |\r\n\r\n#### Error Handling Component Mapping\r\n| Boomi Component | SAP Integration Suite Equivalent | Purpose |\r\n|-----------------|----------------------------------|---------|\r\n| Try/Catch | Exception Subprocess | Handle errors and exceptions during processing |\r\n| Error Properties | Write Variables (Error Context) | Track error counts and statistics |\r\n| Error Notification | Mail Adapter (Error Channel) | Send error alerts to administrators |\r\n| Error End Event | Error End Event | Terminate process with error status |\r\n\r\n### Integration Flow Visualization\r\n\r\n```mermaid\r\nflowchart TD\r\n    %% Define node styles for SAP Integration Suite components\r\n    classDef successFactorsAdapter fill:#87CEEB,stroke:#333,stroke-width:2px\r\n    classDef contentModifier fill:#98FB98,stroke:#333,stroke-width:2px\r\n    classDef messageMapping fill:#DDA0DD,stroke:#333,stroke-width:2px\r\n    classDef sftpAdapter fill:#FFD700,stroke:#333,stroke-width:2px\r\n    classDef event fill:#C0C0C0,stroke:#333,stroke-width:2px\r\n    classDef errorHandler fill:#FFA07A,stroke:#333,stroke-width:2px\r\n    classDef mailAdapter fill:#E6E6FA,stroke:#333,stroke-width:2px\r\n    classDef encryptor fill:#F0E68C,stroke:#333,stroke-width:2px\r\n\r\n    %% Main Process Flow\r\n    Start((\"Start Message Event\")):::event --> InitProperties[\"Content Modifier: Initialize Error Properties\"]:::contentModifier\r\n    InitProperties --> BuildFilters[\"Content Modifier: Build Dynamic Filters\"]:::contentModifier\r\n    BuildFilters --> LoadReference[\"SuccessFactors Adapter: Load Reference Data\"]:::successFactorsAdapter\r\n    LoadReference --> ExtractData[\"SuccessFactors Adapter: Extract Employee Data\"]:::successFactorsAdapter\r\n    ExtractData --> TransformData[\"Message Mapping: SuccessFactors to NAVEX\"]:::messageMapping\r\n    TransformData --> GenerateCSV[\"Content Modifier: Generate CSV Format\"]:::contentModifier\r\n    GenerateCSV --> EncryptFile[\"PGP Encryptor: Secure File\"]:::encryptor\r\n    EncryptFile --> DeliverNAVEX[\"SFTP Adapter: Deliver to NAVEX\"]:::sftpAdapter\r\n    DeliverNAVEX --> ArchiveFile[\"SFTP Adapter: Internal Archive\"]:::sftpAdapter\r\n    ArchiveFile --> SendNotification[\"Mail Adapter: Success Notification\"]:::mailAdapter\r\n    SendNotification --> End((\"End Message Event\")):::event\r\n\r\n    %% Error Handling Flows\r\n    InitProperties -->|\"Error\"| ErrorHandler[(\"Exception Subprocess\")]:::errorHandler\r\n    BuildFilters -->|\"Error\"| ErrorHandler\r\n    LoadReference -->|\"Error\"| ErrorHandler\r\n    ExtractData -->|\"Error\"| ErrorHandler\r\n    TransformData -->|\"Error\"| ErrorHandler\r\n    GenerateCSV -->|\"Error\"| ErrorHandler\r\n    EncryptFile -->|\"Error\"| ErrorHandler\r\n    DeliverNAVEX -->|\"Error\"| ErrorHandler\r\n    ArchiveFile -->|\"Error\"| ErrorHandler\r\n    \r\n    ErrorHandler --> LogError[\"Write Variables: Error Statistics\"]:::contentModifier\r\n    LogError --> ErrorNotification[\"Mail Adapter: Error Alert\"]:::mailAdapter\r\n    ErrorNotification --> ErrorEnd((\"Error End Event\")):::event\r\n\r\n    %% Dynamic Properties Detail\r\n    subgraph DynamicProcessing[\"Dynamic Query Construction\"]\r\n        CalcDates[\"Content Modifier: Calculate Date Ranges\"]:::contentModifier\r\n        BuildWhere[\"Content Modifier: Construct WHERE Clauses\"]:::contentModifier\r\n        SetParameters[\"Content Modifier: Set Query Parameters\"]:::contentModifier\r\n        CalcDates --> BuildWhere\r\n        BuildWhere --> SetParameters\r\n    end\r\n    \r\n    BuildFilters -.-> DynamicProcessing\r\n\r\n    %% Reference Data Processing\r\n    subgraph ReferenceData[\"Reference Data Enrichment\"]\r\n        GetPicklists[\"SuccessFactors Adapter: Get Picklist Values\"]:::successFactorsAdapter\r\n        CacheData[\"Content Modifier: Cache Reference Data\"]:::contentModifier\r\n        GetPicklists --> CacheData\r\n    end\r\n    \r\n    LoadReference -.-> ReferenceData\r\n\r\n    %% File Processing Detail\r\n    subgraph FileProcessing[\"File Generation and Security\"]\r\n        FormatCSV[\"Content Modifier: CSV Formatting\"]:::contentModifier\r\n        ValidateData[\"Content Modifier: Data Validation\"]:::contentModifier\r\n        ApplyEncryption[\"PGP Encryptor: Apply Encryption\"]:::encryptor\r\n        FormatCSV --> ValidateData\r\n        ValidateData --> ApplyEncryption\r\n    end\r\n    \r\n    GenerateCSV -.-> FileProcessing\r\n```\r\n\r\n### Configuration Details\r\n\r\n#### SuccessFactors Adapter Configuration\r\n- **Connection Type:** OData v2 API\r\n- **Authentication:** OAuth 2.0 with client credentials\r\n- **Base URL:** `https://{tenant}.successfactors.com/odata/v2/`\r\n- **Entity Set:** CompoundEmployee\r\n- **Query Parameters:** Dynamic $filter, $select, $expand\r\n- **Timeout:** 300 seconds for large datasets\r\n- **Retry Policy:** 3 attempts with exponential backoff\r\n\r\n#### SFTP Adapter Configuration\r\n- **Connection Type:** SSH/SFTP\r\n- **Authentication:** Private key authentication\r\n- **Host:** Configurable NAVEX and PepsiCo SFTP servers\r\n- **Directory Structure:** `/incoming/{YYYY-MM-DD}/`\r\n- **File Naming:** `employees_{timestamp}.csv.pgp`\r\n- **Transfer Mode:** Binary for encrypted files\r\n\r\n#### Message Mapping Configuration\r\n- **Source Schema:** SuccessFactors CompoundEmployee XSD\r\n- **Target Schema:** NAVEX CSV structure\r\n- **Mapping Functions:** Date formatting, string concatenation, lookup functions\r\n- **Default Values:** Configurable default values for missing fields\r\n- **Validation Rules:** Required field validation and data type checking\r\n\r\n#### Content Modifier Configuration\r\n- **Property Types:** Process properties, headers, and exchange properties\r\n- **Dynamic Expressions:** Groovy scripts for complex calculations\r\n- **Date Calculations:** Current date, date ranges, and formatting functions\r\n- **String Operations:** Concatenation, substring, and formatting operations\r\n- **Conditional Logic:** IF-THEN-ELSE expressions for data routing\r\n\r\n## Environment Configuration\r\n\r\n### Required Configuration Parameters\r\n\r\n| Parameter Category | Parameter Name | Description | Example Value |\r\n|--------------------|----------------|-------------|---------------|\r\n| **SuccessFactors Connection** | SF_BASE_URL | SuccessFactors tenant base URL | `https://tenant.successfactors.com` |\r\n| | SF_CLIENT_ID | OAuth client ID for API access | `client_12345` |\r\n| | SF_CLIENT_SECRET | OAuth client secret (encrypted) | `${secure::sf_secret}` |\r\n| | SF_TOKEN_URL | OAuth token endpoint | `/oauth/token` |\r\n| **SFTP Configuration** | NAVEX_SFTP_HOST | NAVEX SFTP server hostname | `sftp.navex.com` |\r\n| | NAVEX_SFTP_USER | SFTP username for NAVEX | `pepsi_user` |\r\n| | NAVEX_SFTP_KEY | SSH private key (encrypted) | `${secure::navex_key}` |\r\n| | PEPSI_SFTP_HOST | Internal SFTP server hostname | `archive.pepsi.com` |\r\n| **Encryption** | PGP_PUBLIC_KEY | NAVEX public key for encryption | `${secure::pgp_key}` |\r\n| | PGP_PASSPHRASE | PGP key passphrase (encrypted) | `${secure::pgp_pass}` |\r\n| **Email Notification** | SMTP_SERVER | Email server hostname | `smtp.pepsi.com` |\r\n| | EMAIL_RECIPIENTS | Notification email addresses | `admin@pepsi.com,ops@pepsi.com` |\r\n| **Process Control** | BATCH_SIZE | Maximum records per batch | `1000` |\r\n| | RETRY_ATTEMPTS | Number of retry attempts | `3` |\r\n| | TIMEOUT_MINUTES | Process timeout in minutes | `60` |\r\n\r\n### Environment Variables\r\n\r\n| Variable Name | Description | Example Value | Environment |\r\n|---------------|-------------|---------------|-------------|\r\n| `BOOMI_ENVIRONMENT` | Deployment environment identifier | `PROD`, `TEST`, `DEV` | All |\r\n| `SF_TENANT_ID` | SuccessFactors tenant identifier | `pepsi_prod` | All |\r\n| `LOG_LEVEL` | Application logging level | `INFO`, `DEBUG`, `ERROR` | All |\r\n| `PROCESS_SCHEDULE` | Cron expression for scheduled runs | `0 0 6 * * ?` | Production |\r\n| `MAX_MEMORY` | JVM maximum heap size | `4096m` | All |\r\n| `TEMP_DIRECTORY` | Temporary file storage location | `/tmp/boomi/employee-sync` | All |\r\n\r\n### Dependencies on External Systems\r\n\r\n| System | Dependency Type | Required Connectivity | SLA Requirements |\r\n|--------|----------------|----------------------|------------------|\r\n| **SAP SuccessFactors** | REST API (OData v2) | HTTPS outbound on port 443 | 99.5% availability, <5s response time |\r\n| **NAVEX SFTP Server** | SFTP File Transfer | SSH outbound on port 22 | 99.9% availability, <30s transfer time |\r\n| **PepsiCo SFTP Archive** | Internal SFTP | SSH outbound on port 22 | 99.9% availability |\r\n| **SMTP Email Server** | Email Notifications | SMTP outbound on port 587 | 99% availability |\r\n| **PGP Key Server** | Key Management | HTTPS outbound on port 443 | 99% availability |\r\n\r\n### Security Settings and Certificates\r\n\r\n| Security Component | Requirement | Configuration |\r\n|-------------------|-------------|---------------|\r\n| **TLS Certificates** | Valid SSL certificates for all HTTPS connections | Auto-renewal every 90 days |\r\n| **SSH Keys** | RSA 2048-bit minimum for SFTP connections | Key rotation every 12 months |\r\n| **PGP Keys** | RSA 4096-bit for file encryption | Key rotation every 24 months |\r\n| **OAuth Tokens** | Secure token storage and refresh | Token refresh every 60 minutes |\r\n| **Credential Encryption** | AES-256 encryption for stored secrets | Boomi secure property management |\r\n| **Network Security** | VPN or private connectivity to external systems | Firewall rules for specific IP ranges |\r\n\r\n### Deployment Considerations\r\n\r\n| Aspect | Requirement | Implementation |\r\n|--------|-------------|---------------|\r\n| **High Availability** | 99.9% uptime requirement | Multi-node Boomi runtime cluster |\r\n| **Disaster Recovery** | RTO: 4 hours, RPO: 1 hour | Automated failover and data replication |\r\n| **Scalability** | Support for 50K+ employee records | Horizontal scaling and batch processing |\r\n| **Monitoring** | Real-time process monitoring | Integration with enterprise monitoring tools |\r\n| **Backup Strategy** | Daily configuration backups | Automated backup to secure storage |\r\n| **Version Control** | Change management and rollback | Git-based deployment pipeline |\r\n\r\n### Required Resources\r\n\r\n| Resource Type | Minimum Requirement | Recommended | Purpose |\r\n|---------------|-------------------|-------------|---------|\r\n| **Memory** | 4GB RAM | 8GB RAM | Large dataset processing |\r\n| **CPU** | 2 cores | 4 cores | Parallel data transformation |\r\n| **Storage** | 10GB free space | 50GB free space | Temporary file processing |\r\n| **Network Bandwidth** | 10 Mbps | 100 Mbps | File transfers and API calls |\r\n| **Database Connections** | 5 concurrent | 10 concurrent | Reference data caching |\r\n| **SFTP Connections** | 2 concurrent | 5 concurrent | Multi-destination delivery |\r\n\r\n## API Reference\r\n\r\n### SuccessFactors OData API Endpoints\r\n\r\n#### Get Employee Data\r\n- **Method:** GET\r\n- **Endpoint:** `/odata/v2/CompoundEmployee`\r\n- **Purpose:** Retrieve comprehensive employee information\r\n- **Authentication:** OAuth 2.0 Bearer Token\r\n\r\n**Request Headers:**\r\n```\r\nAuthorization: Bearer {access_token}\r\nAccept: application/json\r\nContent-Type: application/json\r\n```\r\n\r\n**Query Parameters:**\r\n\r\n| Parameter | Type | Required | Description | Example |\r\n|-----------|------|----------|-------------|---------|\r\n| `$filter` | String | No | OData filter expression | `employment_status eq 'A'` |\r\n| `$select` | String | No | Field selection | `person_id_external,first_name,last_name` |\r\n| `$expand` | String | No | Related entity expansion | `employment_information,personal_information` |\r\n| `$top` | Integer | No | Maximum records to return | `1000` |\r\n| `$skip` | Integer | No | Records to skip | `0` |\r\n| `$orderby` | String | No | Sort order | `last_modified_on desc` |\r\n\r\n**Response Format:**\r\n```json\r\n{\r\n  \"d\": {\r\n    \"results\": [\r\n      {\r\n        \"person_id_external\": \"12345\",\r\n        \"employment_information\": {\r\n          \"employment_status\": \"A\",\r\n          \"employee_class\": \"REG\",\r\n          \"hire_date\": \"2020-01-15T00:00:00\"\r\n        },\r\n        \"personal_information\": {\r\n          \"first_name\": \"John\",\r\n          \"last_name\": \"Doe\",\r\n          \"email\": \"john.doe@pepsi.com\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\n**Status Codes:**\r\n- `200 OK`: Successful data retrieval\r\n- `400 Bad Request`: Invalid query parameters\r\n- `401 Unauthorized`: Invalid or expired token\r\n- `429 Too Many Requests`: Rate limit exceeded\r\n- `500 Internal Server Error`: SuccessFactors system error\r\n\r\n#### Get Picklist Values\r\n- **Method:** GET\r\n- **Endpoint:** `/odata/v2/Picklist('{picklist_id}')`\r\n- **Purpose:** Retrieve reference data for field lookups\r\n- **Authentication:** OAuth 2.0 Bearer Token\r\n\r\n**Path Parameters:**\r\n- `picklist_id`: Identifier for specific picklist (e.g., 'employment_status', 'employee_class')\r\n\r\n**Response Format:**\r\n```json\r\n{\r\n  \"d\": {\r\n    \"picklist_id\": \"employment_status\",\r\n    \"picklistOptions\": [\r\n      {\r\n        \"id\": \"A\",\r\n        \"externalCode\": \"A\",\r\n        \"label\": \"Active\"\r\n      },\r\n      {\r\n        \"id\": \"T\",\r\n        \"externalCode\": \"T\", \r\n        \"label\": \"Terminated\"\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\n### OAuth 2.0 Token Management\r\n\r\n#### Get Access Token\r\n- **Method:** POST\r\n- **Endpoint:** `/oauth/token`\r\n- **Purpose:** Obtain access token for API authentication\r\n- **Authentication:** Basic Auth (client_id:client_secret)\r\n\r\n**Request Body:**\r\n```\r\ngrant_type=client_credentials\r\n&client_id={client_id}\r\n&client_secret={client_secret}\r\n&scope=read\r\n```\r\n\r\n**Response Format:**\r\n```json\r\n{\r\n  \"access_token\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...\",\r\n  \"token_type\": \"Bearer\",\r\n  \"expires_in\": 3600,\r\n  \"scope\": \"read\"\r\n}\r\n```\r\n\r\n### SFTP File Transfer Specifications\r\n\r\n#### File Naming Convention\r\n- **Pattern:** `employees_{YYYYMMDD}_{HHMMSS}.csv.pgp`\r\n- **Example:** `employees_20241023_143052.csv.pgp`\r\n- **Description:** Timestamp-based naming for unique identification\r\n\r\n#### Directory Structure\r\n- **NAVEX Path:** `/incoming/{YYYY-MM-DD}/`\r\n- **Archive Path:** `/archive/employee-sync/{YYYY}/{MM}/`\r\n- **Temp Path:** `/tmp/employee-sync/`\r\n\r\n#### File Format Specifications\r\n- **CSV Delimiter:** Comma (,)\r\n- **Text Qualifier:** Double quote (\")\r\n- **Character Encoding:** UTF-8\r\n- **Line Terminator:** CRLF (\\r\\n)\r\n- **Header Row:** Required with field names\r\n\r\n### Error Codes and Handling\r\n\r\n#### Process Error Codes\r\n| Error Code | Description | Resolution |\r\n|------------|-------------|------------|\r\n| `SF001` | SuccessFactors connection timeout | Retry with exponential backoff |\r\n| `SF002` | Invalid OData query syntax | Validate filter expressions |\r\n| `SF003` | Insufficient API permissions | Check OAuth scopes |\r\n| `SFTP001` | SFTP connection failure | Verify network connectivity |\r\n| `SFTP002` | Authentication failure | Validate SSH keys |\r\n| `PGP001` | Encryption key not found | Verify PGP key configuration |\r\n| `MAP001` | Data transformation error | Check field mappings |\r\n| `GEN001` | General processing error | Review process logs |\r\n\r\n#### Rate Limiting\r\n- **Limit:** 100 requests per minute per tenant\r\n- **Headers:** `X-RateLimit-Limit`, `X-RateLimit-Remaining`\r\n- **Retry Strategy:** Exponential backoff with jitter\r\n- **Maximum Retries:** 3 attempts\r\n\r\n#### Pagination Support\r\n- **Page Size:** Maximum 1000 records per request\r\n- **Navigation:** Use `$skip` and `$top` parameters\r\n- **Total Count:** Available in response metadata\r\n- **Continuation:** Automatic handling in Boomi process",
  "markdown_length": 35475,
  "constructed_query": "Create a complete SAP iFlow integration package named 'IFlow_b6161171' with the following requirements from the documentation:\n\n# SuccessFactors Employee Data Synchronization to NAVEX SFTP with Error Handling\r\n\r\n## Table of Contents\r\n\r\n1. [API Overview](#api-overview)\r\n2. [Endpoints](#endpoints)\r\n3. [Current Boomi Flow Logic](#current-boomi-flow-logic)\r\n   - [Process Flow Overview](#process-flow-overview)\r\n   - [Step-by-Step Flow Description](#step-by-step-flow-description)\r\n4. [Boomi Transformations Explained](#boomi-transformations-explained)\r\n5. [SAP Integration Suite Implementation](#sap-integration-suite-implementation)\r\n   - [Component Mapping](#component-mapping)\r\n   - [Integration Flow Visualization](#integration-flow-visualization)\r\n   - [Configuration Details](#configuration-details)\r\n6. [Environment Configuration](#environment-configuration)\r\n7. [API Reference](#api-reference)\r\n\r\n## API Overview\r\n\r\nThis integration solution provides comprehensive employee data synchronization between SAP SuccessFactors and NAVEX via SFTP delivery. The solution focuses on accurate and timely transfer of employee data with robust error handling, data transformation, and secure file delivery capabilities.\r\n\r\n**Base Endpoints:**\r\n- SAP SuccessFactors OData API for employee data extraction\r\n- NAVEX SFTP server for secure file delivery\r\n- PepsiCo SFTP server for internal archiving\r\n\r\n**Authentication:**\r\n- OAuth 2.0 for SuccessFactors API access\r\n- SSH key-based authentication for SFTP connections\r\n- PGP encryption for secure file transfers\r\n\r\n**Key Capabilities:**\r\n- Dynamic filter construction for flexible data extraction\r\n- Real-time picklist value lookups for data enrichment\r\n- Comprehensive field mapping and transformation\r\n- Multi-destination file delivery with encryption\r\n- Complete error tracking and notification system\r\n\r\n## Endpoints\r\n\r\n### SuccessFactors Employee Data Extraction\r\n- **Method:** GET\r\n- **Endpoint Pattern:** `/odata/v2/CompoundEmployee`\r\n- **Purpose:** Extract employee demographic and employment information\r\n- **Authentication:** OAuth 2.0 Bearer Token\r\n\r\n**Query Parameters:**\r\n\n\nGenerate a production-ready iFlow with proper:\n1. Start and End events\n2. Required adapters and connectors\n3. Content modifiers and processing steps\n4. Proper sequence flows\n5. Error handling\n6. SAP Integration Suite compliance\n",
  "query_length": 2358,
  "markdown_truncated_at": 2000,
  "api_endpoint": "/api/generate-iflow-from-markdown",
  "request_time": "2025-10-23T11:15:17.285114"
}