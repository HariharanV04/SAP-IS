{
  "timestamp": "20251023_180559",
  "job_id": null,
  "iflow_name": "IFlow_2d838513",
  "original_markdown": "# Create Salesforce Opportunities from Stripe Subscriptions Integration\r\n\r\n## Table of Contents\r\n\r\n- [API Overview](#api-overview)\r\n- [Endpoints](#endpoints)\r\n- [Current Boomi Flow Logic](#current-boomi-flow-logic)\r\n  - [Process Flow Overview](#process-flow-overview)\r\n  - [Step-by-Step Flow Description](#step-by-step-flow-description)\r\n- [Boomi Transformations Explained](#boomi-transformations-explained)\r\n- [SAP Integration Suite Implementation](#sap-integration-suite-implementation)\r\n  - [Component Mapping](#component-mapping)\r\n  - [Integration Flow Visualization](#integration-flow-visualization)\r\n  - [Configuration Details](#configuration-details)\r\n- [Environment Configuration](#environment-configuration)\r\n- [API Reference](#api-reference)\r\n\r\n## API Overview\r\n\r\nThis integration creates Salesforce Opportunities automatically when Stripe subscription events are completed. The integration provides a seamless connection between Stripe payment processing and Salesforce sales opportunity management, enabling automatic opportunity creation based on successful subscription completions.\r\n\r\n**Base Integration Pattern:**\r\n- **Source System:** Stripe Payment Platform (via webhook events)\r\n- **Target System:** Salesforce CRM (Opportunity object)\r\n- **Trigger:** Stripe subscription completion events\r\n- **Response Format:** XML for Salesforce opportunity creation\r\n- **Authentication:** Salesforce OAuth 2.0 or Session-based authentication\r\n\r\n**Key Business Capabilities:**\r\n- Automatic opportunity creation from successful Stripe subscriptions\r\n- Dynamic property calculation for customer details and subscription information\r\n- Real-time webhook processing for immediate opportunity creation\r\n- Error handling and exception management for failed processing\r\n\r\n## Endpoints\r\n\r\n### Stripe Webhook Listener Endpoint\r\n\r\n**HTTP Method:** POST  \r\n**Endpoint Pattern:** `/stripe/webhook/subscription-completed`  \r\n**Purpose:** Receives Stripe webhook notifications when subscriptions are completed successfully\r\n\r\n**Request Headers:**\r\n- `Content-Type`: application/json\r\n- `Stripe-Signature`: Webhook signature for verification\r\n- `Accept`: application/json\r\n\r\n**Request Body Structure:**\r\n```json\r\n{\r\n  \"id\": \"sub_1234567890\",\r\n  \"object\": \"subscription\",\r\n  \"status\": \"active\",\r\n  \"customer\": {\r\n    \"id\": \"cus_1234567890\",\r\n    \"name\": \"Customer Name\",\r\n    \"email\": \"customer@example.com\"\r\n  },\r\n  \"items\": {\r\n    \"data\": [\r\n      {\r\n        \"price\": {\r\n          \"product\": \"prod_1234567890\",\r\n          \"unit_amount\": 2999\r\n        }\r\n      }\r\n    ]\r\n  },\r\n  \"current_period_start\": 1640995200,\r\n  \"current_period_end\": 1672531200\r\n}\r\n```\r\n\r\n**Response Format:**\r\n- **Success (200):** `{\"status\": \"processed\", \"opportunity_id\": \"006XXXXXXXXXXXXXXX\"}`\r\n- **Error (400):** `{\"error\": \"Invalid webhook data\", \"details\": \"Missing required fields\"}`\r\n- **Error (500):** `{\"error\": \"Processing failed\", \"details\": \"Salesforce connection error\"}`\r\n\r\n### Salesforce Opportunity Creation Endpoint\r\n\r\n**Target Object:** Opportunity  \r\n**Operation:** CREATE  \r\n**Purpose:** Creates new opportunity records in Salesforce based on Stripe subscription data\r\n\r\n**Request Structure (XML):**\r\n```xml\r\n<Opportunity>\r\n  <Name>Customer Name - Subscription</Name>\r\n  <Description>Opportunity created from Stripe subscription completion</Description>\r\n  <CloseDate>2024-12-31</CloseDate>\r\n  <StageName>Closed Won</StageName>\r\n  <Amount>29.99</Amount>\r\n</Opportunity>\r\n```\r\n\r\n## Current Boomi Flow Logic\r\n\r\n### Process Flow Overview\r\n\r\nThis Boomi integration processes Stripe subscription completion webhooks and creates corresponding Salesforce opportunities through a streamlined four-step process:\r\n\r\n1. **Webhook Reception:** Listens for Stripe subscription completion events via HTTP webhook\r\n2. **Dynamic Property Setting:** Calculates and sets customer name, subscription details, and Salesforce-specific fields\r\n3. **Data Transformation:** Maps JSON webhook data to Salesforce opportunity XML format\r\n4. **Opportunity Creation:** Sends transformed data to Salesforce to create opportunity records\r\n\r\nThe process includes error handling and uses dynamic document properties to enrich the data before transformation.\r\n\r\n### Step-by-Step Flow Description\r\n\r\n---\r\n\r\n#### **Step 1: Start Event (shape1)**\r\n\r\n**Component Type:** Start Event\r\n\r\n**Purpose:** Initiates the integration process when Stripe webhook events are received\r\n\r\n**Configuration Details:**\r\n\r\n- **Trigger Type:** HTTP Webhook Listener\r\n- **Input Format:** JSON (Stripe subscription completion event)\r\n- **Event Condition:** Subscription status completion\r\n- **Listening Port:** Configured webhook endpoint\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Stripe subscription completion webhook (JSON format)\r\n- **Processing:** Event validation and initial processing setup\r\n- **Output:** Validated webhook data ready for property enhancement\r\n\r\n---\r\n\r\n#### **Step 2: Document Properties (shape6)**\r\n\r\n**Component Type:** Document Properties\r\n\r\n**Purpose:** Sets dynamic properties for customer name, subscription details, and Salesforce description fields\r\n\r\n**Configuration Details:**\r\n\r\n- **Dynamic Properties Set:** 4 dynamic document properties\r\n  - Dynamic Document Property - DDP_CustomerName: Process property: Dynamic Document Property - DDP_CustomerName\r\n  - Dynamic Document Property - DDP_Subscription: Process property: Dynamic Document Property - DDP_Subscription  \r\n  - Dynamic Document Property - DDP_SalesforceDescription: Process property: Dynamic Document Property - DDP_SalesforceDescription\r\n  - Additional property for close date calculation\r\n\r\n**Property Calculations:**\r\n\r\n| Property Name | Source Configuration | Business Purpose |\r\n|---------------|---------------------|------------------|\r\n| DDP_CustomerName | Extracted from Stripe customer data | Customer identification for opportunity naming |\r\n| DDP_Subscription | Subscription ID and details from webhook | Subscription tracking and reference |\r\n| DDP_SalesforceDescription | Concatenated customer and subscription info | Opportunity description field population |\r\n| DDP_CloseDate | Calculated close date (likely current date + period) | Opportunity close date setting |\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Raw Stripe webhook JSON data\r\n- **Processing:** Property extraction, calculation, and dynamic property setting\r\n- **Output:** Enhanced data with calculated properties for transformation\r\n\r\n---\r\n\r\n#### **Step 3: Transform/Map Components (shape4)**\r\n\r\n**Component Type:** Map/Transform\r\n\r\n**Purpose:** Transforms Stripe subscription JSON data to Salesforce opportunity XML format\r\n\r\n**Configuration Details:**\r\n\r\n- **Input Profile:** Subscription Completed JSON (Stripe webhook format)\r\n- **Output Profile:** SF Opportunity CREATE Request XML\r\n- **Transformation Logic:** JSON to XML conversion with dynamic property integration\r\n- **Function Steps:** DocumentPropertyGet functions for dynamic field population\r\n\r\n**Input Data Structure:**\r\n\r\n| Field Name | Data Type | Description |\r\n|------------|-----------|-------------|\r\n| subscription.id | String | Stripe subscription identifier |\r\n| customer.name | String | Customer name from Stripe |\r\n| customer.email | String | Customer email address |\r\n| subscription.status | String | Subscription status (completed) |\r\n| subscription.amount | Number | Subscription amount |\r\n\r\n**Output Data Structure:**\r\n\r\n| Field Name | Data Type | Description |\r\n|------------|-----------|-------------|\r\n| Opportunity.Name | String | Opportunity name (from dynamic property) |\r\n| Opportunity.Description | String | Opportunity description (from dynamic property) |\r\n| Opportunity.CloseDate | Date | Opportunity close date (from dynamic property) |\r\n\r\n**Field Mappings:**\r\n\r\n| Source Field | Target Field | Data Type | Business Purpose |\r\n|--------------|--------------|-----------|------------------|\r\n| Dynamic Property (DDP_CustomerName) | Opportunity/Name | String | Sets opportunity name from calculated customer name property |\r\n| Dynamic Property (DDP_SalesforceDescription) | Opportunity/Description | String | Sets opportunity description from concatenated subscription details |\r\n| Dynamic Property (DDP_CloseDate) | Opportunity/CloseDate | Date | Sets opportunity close date from calculated date property |\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Enhanced JSON data with dynamic properties\r\n- **Processing:** JSON to XML transformation with dynamic property integration\r\n- **Output:** Salesforce-compatible opportunity XML ready for creation\r\n\r\n---\r\n\r\n#### **Step 4: Connector Action (shape3)**\r\n\r\n**Component Type:** Salesforce Connector\r\n\r\n**Purpose:** Creates opportunity records in Salesforce using the transformed data\r\n\r\n**Configuration Details:**\r\n\r\n- **Connector Type:** Salesforce\r\n- **Operation:** CREATE\r\n- **Target Object:** Opportunity\r\n- **Authentication:** Salesforce OAuth or session-based authentication\r\n- **Error Handling:** Standard Salesforce error response processing\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Salesforce opportunity XML from transformation\r\n- **Processing:** Salesforce API call to create opportunity record\r\n- **Output:** Salesforce response with created opportunity ID or error details\r\n\r\n---\r\n\r\n#### **Step 5: End Event (shape5)**\r\n\r\n**Component Type:** End Event\r\n\r\n**Purpose:** Completes the integration process and returns response to Stripe webhook\r\n\r\n**Configuration Details:**\r\n\r\n- **Completion Type:** Success completion with response\r\n- **Response Format:** HTTP response to Stripe webhook\r\n- **Logging:** Process completion status and results\r\n\r\n**Data Flow:**\r\n\r\n- **Input:** Salesforce creation response\r\n- **Processing:** Response formatting and process completion\r\n- **Output:** HTTP response to Stripe webhook confirming processing\r\n\r\n## Boomi Transformations Explained\r\n\r\n### Subscription Completed JSON to SF Opportunity CREATE Request XML\r\n\r\n**Transformation Purpose:** Converts Stripe subscription completion webhook data (JSON format) into Salesforce opportunity creation request (XML format)\r\n\r\n**Input Profile:** Subscription Completed JSON\r\n- Stripe webhook payload containing subscription and customer information\r\n- JSON format with nested objects for customer and subscription details\r\n- Event data including subscription ID, customer details, and completion status\r\n\r\n**Output Profile:** SF Opportunity CREATE Request XML  \r\n- Salesforce-compatible XML structure for opportunity object creation\r\n- Required fields: Name, Description, CloseDate\r\n- XML format following Salesforce API specifications\r\n\r\n**Transformation Functions:**\r\n\r\n**Get Document Property (ProcessProperty) - DDP_SalesforceDescription**\r\n- **Purpose:** Retrieves the dynamically calculated Salesforce description from document properties\r\n- **Output:** Populates Opportunity/Description field with concatenated customer and subscription information\r\n\r\n**Get Document Property (ProcessProperty) - DDP_CustomerName**  \r\n- **Purpose:** Retrieves the customer name from the dynamically set document property\r\n- **Output:** Populates Opportunity/Name field with customer-based opportunity naming\r\n\r\n**Get Document Property (ProcessProperty) - DDP_CloseDate**\r\n- **Purpose:** Retrieves the calculated close date from document properties  \r\n- **Output:** Populates Opportunity/CloseDate field with appropriate opportunity closing timeline\r\n\r\n**Field Mappings:**\r\n\r\n| Source Field | Target Field | Data Type | Business Purpose |\r\n|--------------|--------------|-----------|------------------|\r\n| Function Output (DDP_SalesforceDescription) | Opportunity/Description | String | Maps calculated description containing customer and subscription details to opportunity description field |\r\n| Function Output (DDP_CustomerName) | Opportunity/Name | String | Maps extracted customer name to opportunity name field for identification |\r\n| Function Output (DDP_CloseDate) | Opportunity/CloseDate | Date | Maps calculated close date to opportunity timeline for sales forecasting |\r\n\r\n**Complete Mapping Configuration:**\r\n- **Mapping 1:** Function step output (DocumentPropertyGet for DDP_SalesforceDescription) → Opportunity/Description  \r\n- **Mapping 2:** Function step output (DocumentPropertyGet for DDP_CustomerName) → Opportunity/Name\r\n- **Mapping 3:** Function step output (DocumentPropertyGet for DDP_CloseDate) → Opportunity/CloseDate\r\n\r\nThe transformation leverages Boomi's DocumentPropertyGet functions to access the dynamically calculated properties set in the earlier Document Properties step, ensuring that the Salesforce opportunity is populated with enriched data derived from the original Stripe webhook payload.\r\n\r\n## SAP Integration Suite Implementation\r\n\r\n### Component Mapping\r\n\r\n#### Main Process Component Mapping\r\n| Boomi Component | SAP Integration Suite Equivalent | Purpose |\r\n|-----------------|----------------------------------|---------|\r\n| Start Event (shape1) | Start Message Event | Receives Stripe webhook events to initiate the integration flow |\r\n| Document Properties (shape6) | Content Modifier (Set Properties) | Sets dynamic document properties for customer name, subscription details, and Salesforce fields |\r\n| Map/Transform (shape4) | Message Mapping | Transforms JSON webhook data to Salesforce opportunity XML format |\r\n| Salesforce Connector (shape3) | Salesforce Adapter or HTTPS Adapter | Creates opportunity records in Salesforce using REST/SOAP API |\r\n| End Event (shape5) | End Message Event | Completes the integration process and sends response back to Stripe |\r\n\r\n### Integration Flow Visualization\r\n\r\n```mermaid\r\nflowchart TD\r\n    %% Define node styles for SAP Integration Suite components\r\n    classDef httpAdapter fill:#87CEEB,stroke:#333,stroke-width:2px\r\n    classDef contentModifier fill:#98FB98,stroke:#333,stroke-width:2px\r\n    classDef mapping fill:#DDA0DD,stroke:#333,stroke-width:2px\r\n    classDef adapter fill:#FFD700,stroke:#333,stroke-width:2px\r\n    classDef event fill:#C0C0C0,stroke:#333,stroke-width:2px\r\n    classDef errorHandler fill:#FFA07A,stroke:#333,stroke-width:2px\r\n\r\n    %% Main Integration Flow\r\n    Start((\"Start Message Event\")) --> StripeWebhook[\"HTTPS Adapter: Stripe Webhook Receiver\"]:::httpAdapter\r\n    StripeWebhook --> SetDynamicProps[\"Content Modifier: Set Dynamic Properties<br/>- DDP_CustomerName<br/>- DDP_Subscription<br/>- DDP_SalesforceDescription<br/>- DDP_CloseDate\"]:::contentModifier\r\n    SetDynamicProps --> TransformData[\"Message Mapping: JSON to XML<br/>Stripe Subscription → SF Opportunity\"]:::mapping\r\n    TransformData --> SalesforceCreate[\"Salesforce Adapter: Create Opportunity<br/>Object: Opportunity<br/>Operation: CREATE\"]:::adapter\r\n    SalesforceCreate --> End((\"End Message Event\")):::event\r\n\r\n    %% Dynamic Properties Detail Subgraph\r\n    subgraph DynamicProperties[\"Dynamic Properties Calculation\"]\r\n        direction TB\r\n        ExtractCustomer[\"Extract Customer Name from JSON\"]:::contentModifier\r\n        ExtractSubscription[\"Extract Subscription Details\"]:::contentModifier  \r\n        ConcatDescription[\"Concatenate: Customer + Subscription Info\"]:::contentModifier\r\n        CalcCloseDate[\"Calculate Close Date\"]:::contentModifier\r\n    end\r\n\r\n    %% Error Handling Flow\r\n    StripeWebhook -->|\"Processing Error\"| ErrorHandler[(\"Exception Subprocess\")]:::errorHandler\r\n    TransformData -->|\"Mapping Error\"| ErrorHandler\r\n    SalesforceCreate -->|\"API Error\"| ErrorHandler\r\n    ErrorHandler --> LogError[\"Content Modifier: Log Error Details\"]:::contentModifier\r\n    LogError --> ErrorEnd((\"Error End Event\")):::event\r\n\r\n    %% Add styling based on component types\r\n    class StripeWebhook httpAdapter\r\n    class SetDynamicProps,ExtractCustomer,ExtractSubscription,ConcatDescription,CalcCloseDate,LogError contentModifier\r\n    class TransformData mapping\r\n    class SalesforceCreate adapter\r\n    class Start,End,ErrorEnd event\r\n    class ErrorHandler errorHandler\r\n```\r\n\r\n### Configuration Details\r\n\r\n#### HTTPS Adapter Configuration (Stripe Webhook Receiver)\r\n- **Connection Type:** HTTPS Inbound\r\n- **HTTP Method:** POST\r\n- **Content Type:** application/json\r\n- **Authentication:** Webhook signature verification\r\n- **Endpoint Pattern:** `/stripe/webhook/subscription-completed`\r\n\r\n#### Content Modifier Configuration (Dynamic Properties)\r\n- **Property Variables:**\r\n  - `DDP_CustomerName`: Extract from `${in.body.customer.name}`\r\n  - `DDP_Subscription`: Extract from `${in.body.id}`\r\n  - `DDP_SalesforceDescription`: Concatenate customer and subscription details\r\n  - `DDP_CloseDate`: Calculate using current date + subscription period\r\n\r\n#### Message Mapping Configuration\r\n- **Source Message Type:** JSON (Stripe Webhook)\r\n- **Target Message Type:** XML (Salesforce Opportunity)\r\n- **Mapping Functions:** \r\n  - DocumentPropertyGet equivalent using `${property.DDP_CustomerName}`\r\n  - DocumentPropertyGet equivalent using `${property.DDP_SalesforceDescription}`\r\n  - DocumentPropertyGet equivalent using `${property.DDP_CloseDate}`\r\n\r\n#### Salesforce Adapter Configuration\r\n- **Connection Type:** Salesforce REST API\r\n- **Authentication:** OAuth 2.0 or Session ID\r\n- **Object:** Opportunity\r\n- **Operation:** CREATE\r\n- **Error Handling:** Exception subprocess for API errors\r\n\r\n## Environment Configuration\r\n\r\n### Required Configuration Parameters\r\n\r\n| Parameter | Description | Example Value | Environment |\r\n|-----------|-------------|---------------|-------------|\r\n| `stripe.webhook.endpoint` | Stripe webhook listener URL | `/stripe/webhook/subscription-completed` | All |\r\n| `stripe.webhook.secret` | Webhook signature verification secret | `whsec_1234567890abcdef` | All |\r\n| `salesforce.api.endpoint` | Salesforce API base URL | `https://na1.salesforce.com/services/data/v54.0/` | All |\r\n| `salesforce.auth.type` | Authentication method | `OAuth2` or `SessionID` | All |\r\n| `salesforce.client.id` | OAuth2 client identifier | `3MVG9YDQS5WtC11...` | Production |\r\n| `salesforce.client.secret` | OAuth2 client secret | `1234567890123456789` | Production |\r\n\r\n### Environment Variables\r\n\r\n| Variable | Required | Description | Default Value |\r\n|----------|----------|-------------|---------------|\r\n| `STRIPE_WEBHOOK_SECRET` | Yes | Webhook signature verification key | None |\r\n| `SALESFORCE_USERNAME` | Yes | Salesforce service account username | None |\r\n| `SALESFORCE_PASSWORD` | Yes | Salesforce service account password | None |\r\n| `SALESFORCE_SECURITY_TOKEN` | Yes | Salesforce security token | None |\r\n| `LOG_LEVEL` | No | Integration logging level | `INFO` |\r\n| `TIMEOUT_SECONDS` | No | HTTP request timeout | `30` |\r\n\r\n### External System Dependencies\r\n\r\n#### Stripe Platform Requirements\r\n- **Webhook Configuration:** Must be configured in Stripe dashboard to send subscription.completed events\r\n- **API Version:** Compatible with Stripe API v2020-08-27 or later\r\n- **Network Access:** Inbound HTTPS connectivity for webhook delivery\r\n- **Security:** Webhook signature verification enabled\r\n\r\n#### Salesforce Requirements  \r\n- **API Access:** REST API or SOAP API access enabled\r\n- **User Permissions:** Create permission on Opportunity object\r\n- **Field Access:** Write access to Name, Description, CloseDate fields\r\n- **Rate Limits:** Consider Salesforce API rate limits for high-volume processing\r\n\r\n### Security Settings\r\n\r\n#### SSL/TLS Configuration\r\n- **Webhook Endpoint:** TLS 1.2 or higher required\r\n- **Certificate Validation:** Enable certificate chain validation\r\n- **Cipher Suites:** Strong cipher suites only\r\n\r\n#### Authentication Security\r\n- **Stripe Webhook:** Signature-based verification using webhook secret\r\n- **Salesforce:** OAuth 2.0 with refresh token or session-based authentication\r\n- **Credential Storage:** Secure credential management required\r\n\r\n### Deployment Considerations\r\n\r\n#### Resource Requirements\r\n- **Memory:** Minimum 2GB for standard processing volumes\r\n- **CPU:** 2+ cores recommended for concurrent webhook processing  \r\n- **Network:** Reliable internet connectivity for API calls\r\n- **Storage:** Minimal local storage for temporary processing\r\n\r\n#### High Availability\r\n- **Load Balancing:** Multiple integration instances for webhook redundancy\r\n- **Failover:** Automatic failover for system failures\r\n- **Monitoring:** Health checks and uptime monitoring\r\n- **Backup:** Configuration backup and disaster recovery procedures\r\n\r\n## API Reference\r\n\r\n### Stripe Webhook API\r\n\r\n#### Subscription Completion Event\r\n\r\n**Endpoint:** POST `/stripe/webhook/subscription-completed`\r\n\r\n**Request Headers:**\r\n| Header | Type | Required | Description |\r\n|--------|------|----------|-------------|\r\n| `Content-Type` | String | Yes | `application/json` |\r\n| `Stripe-Signature` | String | Yes | Webhook signature for verification |\r\n| `User-Agent` | String | No | Stripe webhook user agent |\r\n\r\n**Request Body Schema:**\r\n```json\r\n{\r\n  \"id\": \"evt_1234567890\",\r\n  \"object\": \"event\",\r\n  \"api_version\": \"2020-08-27\",\r\n  \"created\": 1640995200,\r\n  \"data\": {\r\n    \"object\": {\r\n      \"id\": \"sub_1234567890\",\r\n      \"object\": \"subscription\",\r\n      \"status\": \"active\",\r\n      \"customer\": \"cus_1234567890\",\r\n      \"items\": {\r\n        \"object\": \"list\",\r\n        \"data\": [...]\r\n      }\r\n    }\r\n  },\r\n  \"type\": \"customer.subscription.created\"\r\n}\r\n```\r\n\r\n**Response Codes:**\r\n- **200 OK:** Webhook processed successfully\r\n- **400 Bad Request:** Invalid webhook payload or signature\r\n- **500 Internal Server Error:** Processing failure\r\n\r\n### Salesforce Opportunity API\r\n\r\n#### Create Opportunity\r\n\r\n**Object:** Opportunity  \r\n**Operation:** CREATE  \r\n**Method:** POST  \r\n**Endpoint:** `/services/data/v54.0/sobjects/Opportunity/`\r\n\r\n**Request Body Schema:**\r\n```xml\r\n<Opportunity>\r\n    <Name>String (required)</Name>\r\n    <Description>String (optional)</Description>\r\n    <CloseDate>Date (required)</CloseDate>\r\n    <StageName>String (required)</StageName>\r\n    <Amount>Decimal (optional)</Amount>\r\n</Opportunity>\r\n```\r\n\r\n**Response Schema:**\r\n```json\r\n{\r\n  \"id\": \"006XXXXXXXXXXXXXXX\",\r\n  \"success\": true,\r\n  \"errors\": []\r\n}\r\n```\r\n\r\n**Field Validation Rules:**\r\n| Field | Type | Required | Max Length | Validation |\r\n|-------|------|----------|------------|------------|\r\n| Name | String | Yes | 120 | Non-empty string |\r\n| Description | String | No | 32000 | Text area |\r\n| CloseDate | Date | Yes | - | Valid date format (YYYY-MM-DD) |\r\n| StageName | String | Yes | 40 | Valid picklist value |\r\n| Amount | Decimal | No | - | Positive number |\r\n\r\n### Error Codes and Handling\r\n\r\n#### Stripe Webhook Errors\r\n| Error Code | Description | Resolution |\r\n|------------|-------------|------------|\r\n| `400` | Invalid signature | Verify webhook secret configuration |\r\n| `422` | Malformed JSON | Check webhook payload format |\r\n| `500` | Processing error | Review integration logs and retry |\r\n\r\n#### Salesforce API Errors  \r\n| Error Code | Description | Resolution |\r\n|------------|-------------|------------|\r\n| `INVALID_FIELD` | Invalid field value | Verify field mapping and data types |\r\n| `REQUIRED_FIELD_MISSING` | Missing required field | Ensure all required fields are mapped |\r\n| `INSUFFICIENT_ACCESS` | Permission denied | Verify user permissions on Opportunity object |\r\n| `REQUEST_LIMIT_EXCEEDED` | API rate limit | Implement retry logic with backoff |\r\n\r\n### Rate Limiting\r\n\r\n#### Stripe Webhook Delivery\r\n- **Retry Policy:** Exponential backoff with maximum 3 attempts\r\n- **Timeout:** 10 seconds per webhook delivery attempt\r\n- **Rate Limit:** No specific limit, but recommend handling high volumes\r\n\r\n#### Salesforce API Limits\r\n- **Daily Limit:** 15,000 API calls per user license (minimum)\r\n- **Concurrent Limit:** 25 concurrent requests per organization\r\n- **Retry Strategy:** Implement exponential backoff for rate limit errors\r\n- **Optimization:** Use bulk APIs for high-volume processing",
  "markdown_length": 23741,
  "constructed_query": "Create a complete SAP iFlow integration package named 'IFlow_2d838513' with the following requirements from the documentation:\n\n# Create Salesforce Opportunities from Stripe Subscriptions Integration\r\n\r\n## Table of Contents\r\n\r\n- [API Overview](#api-overview)\r\n- [Endpoints](#endpoints)\r\n- [Current Boomi Flow Logic](#current-boomi-flow-logic)\r\n  - [Process Flow Overview](#process-flow-overview)\r\n  - [Step-by-Step Flow Description](#step-by-step-flow-description)\r\n- [Boomi Transformations Explained](#boomi-transformations-explained)\r\n- [SAP Integration Suite Implementation](#sap-integration-suite-implementation)\r\n  - [Component Mapping](#component-mapping)\r\n  - [Integration Flow Visualization](#integration-flow-visualization)\r\n  - [Configuration Details](#configuration-details)\r\n- [Environment Configuration](#environment-configuration)\r\n- [API Reference](#api-reference)\r\n\r\n## API Overview\r\n\r\nThis integration creates Salesforce Opportunities automatically when Stripe subscription events are completed. The integration provides a seamless connection between Stripe payment processing and Salesforce sales opportunity management, enabling automatic opportunity creation based on successful subscription completions.\r\n\r\n**Base Integration Pattern:**\r\n- **Source System:** Stripe Payment Platform (via webhook events)\r\n- **Target System:** Salesforce CRM (Opportunity object)\r\n- **Trigger:** Stripe subscription completion events\r\n- **Response Format:** XML for Salesforce opportunity creation\r\n- **Authentication:** Salesforce OAuth 2.0 or Session-based authentication\r\n\r\n**Key Business Capabilities:**\r\n- Automatic opportunity creation from successful Stripe subscriptions\r\n- Dynamic property calculation for customer details and subscription information\r\n- Real-time webhook processing for immediate opportunity creation\r\n- Error handling and exception management for failed processing\r\n\r\n## Endpoints\r\n\r\n### Stripe Webhook Listener Endpoint\r\n\r\n**HTTP Method:** POST  \r\n**Endpoint Pattern:** `/stripe/webhook/subscription-completed`  \r\n**Purpose:** Receives Stripe webhook notifications when subscriptions are complete\n\nGenerate a production-ready iFlow with proper:\n1. Start and End events\n2. Required adapters and connectors\n3. Content modifiers and processing steps\n4. Proper sequence flows\n5. Error handling\n6. SAP Integration Suite compliance\n",
  "query_length": 2358,
  "markdown_truncated_at": 2000,
  "api_endpoint": "/api/generate-iflow-from-markdown",
  "request_time": "2025-10-23T18:05:59.769838"
}