{
  "id": "copy-multiplefiles-fsa-to-mbx",
  "name": "Demo_BP_CopyMultipleFilesFromFSA2MBX",
  "type": "sterling.process",
  "subtype": "bpml",
  "description": "Sterling B2B Business Process: Demo_BP_CopyMultipleFilesFromFSA2MBX",
  "file_path": "sterling-b2b-samples\\business-process\\copy-from-filesystem-to-mailbox\\copy-multiplefiles-fsa-to-mbx.bpml",
  "file_name": "copy-multiplefiles-fsa-to-mbx.bpml",
  "rules": [
    {
      "name": "more_docs",
      "condition": "",
      "type": "business_rule"
    }
  ],
  "operations": [
    {
      "name": "File System Adapter",
      "participant": "",
      "type": "service",
      "config": {
        ".": {
          "from": "*"
        },
        "Action": "FS_COLLECT",
        "collectionFolder": "C:\\Temp\\",
        "collectMultiple": "true",
        "deleteAfterCollect": "false",
        "filter": "*.txt",
        "noFilesSetSuccess": "true"
      }
    },
    {
      "name": "For Each Document",
      "participant": "",
      "type": "service",
      "config": {
        ".": {
          "from": "*"
        },
        "DOCUMENT_KEY_PREFIX": "FSA_Document",
        "ITERATOR_NAME": "FSADoc"
      }
    },
    {
      "name": "Mailbox Add Service",
      "participant": "",
      "type": "service",
      "config": {
        ".": {
          "from": "*"
        },
        "MailboxPath": "/Inbox"
      }
    }
  ],
  "assignments": [],
  "sequences": [
    {
      "name": "Sequence Start",
      "type": "sequential_flow"
    },
    {
      "name": "forEachDoc",
      "type": "sequential_flow"
    },
    {
      "name": "addDoc",
      "type": "sequential_flow"
    }
  ],
  "patterns": [
    "batch_processing",
    "conditional_logic"
  ],
  "raw_content": "<process name=\"Demo_BP_CopyMultipleFilesFromFSA2MBX\">\n  <rule name=\"more_docs\">\n    <condition>//FSADoc.DONE = 0</condition>\n  </rule>\n\n  <sequence name=\"Sequence Start\">\n    <operation name=\"File System Adapter\">\n      <participant name=\"Generic_FSA_Adapter\"/>\n      <output message=\"FileSystemInputMessage\">\n        <assign to=\".\" from=\"*\"></assign>\n        <assign to=\"Action\">FS_COLLECT</assign>\n        <assign to=\"collectionFolder\">C:\\Temp\\</assign>\n        <assign to=\"collectMultiple\">true</assign>\n        <assign to=\"deleteAfterCollect\">false</assign>\n        <assign to=\"filter\">*.txt</assign>\n        <assign to=\"noFilesSetSuccess\">true</assign>\n      </output>\n      <input message=\"inmsg\">\n        <assign to=\".\" from=\"*\"></assign>\n      </input>\n    </operation>\n\n    <sequence name=\"forEachDoc\">\n      <operation name=\"For Each Document\">\n        <participant name=\"ForEachDocument\"/>\n        <output message=\"ForEachDocumentTypeInputMessage\">\n          <assign to=\".\" from=\"*\"></assign>\n          <assign to=\"DOCUMENT_KEY_PREFIX\">FSA_Document</assign>\n          <assign to=\"ITERATOR_NAME\">FSADoc</assign>\n        </output>\n        <input message=\"inmsg\">\n          <assign to=\".\" from=\"*\"></assign>\n        </input>\n      </operation>\n\n      <choice name=\"Choice Start\">\n        <select>\n          <case ref=\"more_docs\" activity=\"addDoc\"/>\n        </select>\n\n        <sequence name=\"addDoc\">\n          <assign name=\"Assign\" to=\"PrimaryDocument\" from=\"FSADoc/@SCIObjectId\"></assign>\n          <assign name=\"Assign\" to=\"MessageName\" from=\"FSADoc.NAME/text()\"></assign>\n          <assign name=\"Assign\" to=\"DocumentId\" from=\"FSADoc/@SCIObjectId\"></assign>\n          \n          <operation name=\"Mailbox Add Service\">\n            <participant name=\"MailboxAdd\"/>\n            <output message=\"MailboxAddServiceTypeInputMessage\">\n              <assign to=\".\" from=\"*\"></assign>\n              <assign to=\"MailboxPath\">/Inbox</assign>\n            </output>\n            <input message=\"inmsg\">\n              <assign to=\".\" from=\"*\"></assign>\n            </input>\n          </operation>\n\n          <repeat name=\"endLoop\" ref=\"forEachDoc\"/>\n\n        </sequence>\n      </choice>\n    </sequence>\n  </sequence>\n</process>"
}